var Me=Object.defineProperty,Pe=(t,e,n)=>e in t?Me(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h=(t,e,n)=>Pe(t,"symbol"!=typeof e?e+"":e,n);const Te=["LinLibertine_R.ttf","LinLibertine_RB.ttf","LinLibertine_RBI.ttf","LinLibertine_RI.ttf","NewCMMath-Book.otf","NewCMMath-Regular.otf","NewCM10-Regular.otf","NewCM10-Bold.otf","NewCM10-Italic.otf","NewCM10-BoldItalic.otf","DejaVuSansMono.ttf","DejaVuSansMono-Bold.ttf","DejaVuSansMono-Oblique.ttf","DejaVuSansMono-BoldOblique.ttf"],Oe=["InriaSerif-Bold.ttf","InriaSerif-BoldItalic.ttf","InriaSerif-Italic.ttf","InriaSerif-Regular.ttf","Roboto-Regular.ttf","NotoSerifCJKsc-Regular.otf"],Fe=["TwitterColorEmoji.ttf","NotoColorEmoji.ttf"];function It(t,e){var n,r;const i=[...t];if(e&&!1!==(null==e?void 0:e.assets)&&null!=(n=null==e?void 0:e.assets)&&n.length&&(null==(r=null==e?void 0:e.assets)?void 0:r.length)>0){let t=e.assetUrlPrefix??"https://raw.githubusercontent.com/Myriad-Dreamin/typst/assets-fonts";"/"!==t[t.length-1]&&(t+="/");const n=e=>e.map((e=>t+e));for(const t of e.assets)switch(t){case"text":i.push(...n(Te));break;case"cjk":i.push(...n(Oe));break;case"emoji":i.push(...n(Fe))}}const o=async(t,{ref:n,builder:r})=>{null!=e&&e.fetcher&&n.setFetcher(e.fetcher),await n.loadFonts(r,i)};return o._preloadRemoteFontOptions=e,o}function Tt({byFamily:t}){return async(e,{builder:n})=>{const r=performance.now();if("queryLocalFonts"in window){const e=await window.queryLocalFonts();t=t??[];for(const r of e){if(!t.includes(r.family))continue;const e=await(await r.blob()).arrayBuffer();await n.add_raw_font(new Uint8Array(e))}}const i=performance.now();console.log("preload system font time used:",i-r)}}function Le(t){return async(e,{builder:n})=>new Promise((e=>{n.set_package_registry(t,(function(e){return t.resolve(e,this)})),e()}))}function De(t){return async(e,n)=>{var r;if(n.alreadySetAccessModel)throw new Error(`already set some assess model before: ${null==(r=n.alreadySetAccessModel.constructor)?void 0:r.name}(${n.alreadySetAccessModel})`);return n.alreadySetAccessModel=t,new Promise((e=>{n.builder.set_access_model(t,(e=>{const n=t.getMTime(e);return n?n.getTime():0}),(e=>t.isFile(e)||!1),(e=>t.getRealPath(e)||e),(e=>t.readAll(e))),e()}))}}const E=Symbol.for("reflexo-obj");var At=(t=>(t[t.PIXEL_PER_PT=3]="PIXEL_PER_PT",t))(At||{});class ie{constructor(t,e,n){h(this,"loadPageCount"),h(this,"imageScaleFactor"),h(this,"container"),h(this,"canvasList"),h(this,"textLayerList"),h(this,"commonList"),h(this,"textLayerParentList"),h(this,"semanticLayerList"),this.pageInfos=t,this.imageScaleFactor=n.pixelPerPt??At.PIXEL_PER_PT,e.innerHTML="",e.style.width="100%",this.container=e,this.canvasList=new Array(this.loadPageCount),this.textLayerList=new Array(this.loadPageCount),this.commonList=new Array(this.loadPageCount),this.textLayerParentList=new Array(this.loadPageCount),this.semanticLayerList=new Array(this.loadPageCount);const r=(t,n,r)=>{const i=Math.ceil(n.width)*this.imageScaleFactor,o=Math.ceil(n.height)*this.imageScaleFactor,_=this.canvasList[t]=document.createElement("canvas"),s=this.semanticLayerList[t]=document.createElement("div"),a=this.textLayerList[t]=document.createElement("div"),c=this.textLayerParentList[t]=document.createElement("div");if(_.getContext("2d")){const t=document.createElement("div");_.width=i,_.height=o,t.appendChild(_),r.appendChild(t),t.style.position="absolute"}{c.appendChild(a),c.className="typst-html-semantics";const t=e.offsetWidth,i=t/n.width;c.style.width=`${t}px`,c.style.height=n.height*i+"px",c.style.setProperty("--data-text-width",`${i}px`),c.style.setProperty("--data-text-height",`${i}px`),r.classList.add("typst-page"),r.classList.add("canvas"),r.style.width=`${t}px`,r.style.height=o*i+"px",r.style.position="relative",s.appendChild(c),r.appendChild(s)}};for(let t=0;t<this.pageInfos.length;t++){const n=this.pageInfos[t];let i;i=this.commonList[t]=document.createElement("div"),e.appendChild(i),r(t,n,i)}}resetLayout(){for(let t=0;t<this.pageInfos.length;t++){const e=this.pageInfos[t],n=Math.ceil(e.width)*this.imageScaleFactor,r=Math.ceil(e.height)*this.imageScaleFactor,i=this.canvasList[t].parentElement;if(!i)throw new Error(`canvasDiv is null for page ${t}, canvas list length ${this.canvasList.length}`);const o=this.commonList[t],_=this.textLayerParentList[t],s=this.container.offsetWidth,a=s/n;_.style.width=`${s}px`,_.style.height=r*a+"px",o.style.width=`${s}px`,o.style.height=r*a+"px";const c=this.container.offsetWidth/n;i.style.transformOrigin="0px 0px",i.style.transform=`scale(${c})`}}}const $e=t=>{let e,n=!1;return()=>n?e:(n=!0,e=t())};class oe{constructor(t){if(h(this,"wasmBin"),h(this,"initOnce"),"function"!=typeof t)throw new Error("initFn is not a function");this.initOnce=$e((async()=>{await t(this.wasmBin)}))}async init(t){this.wasmBin=t,await this.initOnce()}}const je=(t,e)=>e.some((e=>t instanceof e));let Ot,Ft;function We(){return Ot||(Ot=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Be(){return Ft||(Ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const se=new WeakMap,Et=new WeakMap,_e=new WeakMap,pt=new WeakMap,Mt=new WeakMap;function ze(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{e(tt(t.result)),r()},o=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((e=>{e instanceof IDBCursor&&se.set(e,t)})).catch((()=>{})),Mt.set(e,t),e}function Ue(t){if(Et.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{e(),r()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));Et.set(t,e)}let St={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Et.get(t);if("objectStoreNames"===e)return t.objectStoreNames||_e.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function qe(t){St=t(St)}function Ne(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?Be().includes(t)?function(...e){return t.apply(ht(this),e),tt(se.get(this))}:function(...e){return tt(t.apply(ht(this),e))}:function(e,...n){const r=t.call(ht(this),e,...n);return _e.set(r,e.sort?e.sort():[e]),tt(r)}}function He(t){return"function"==typeof t?Ne(t):(t instanceof IDBTransaction&&Ue(t),je(t,We())?new Proxy(t,St):t)}function tt(t){if(t instanceof IDBRequest)return ze(t);if(pt.has(t))return pt.get(t);const e=He(t);return e!==t&&(pt.set(t,e),Mt.set(e,t)),e}const ht=t=>Mt.get(t),Ve=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],mt=new Map;function Lt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(mt.get(e))return mt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Je.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ve.includes(n))return;const o=async function(t,...e){const o=this.transaction(t,i?"readwrite":"readonly");let _=o.store;return r&&(_=_.index(e.shift())),(await Promise.all([_[n](...e),i&&o.done]))[0]};return mt.set(e,o),o}qe((t=>({...t,get:(e,n,r)=>Lt(e,n)||t.get(e,n,r),has:(e,n)=>!!Lt(e,n)||t.has(e,n)})));class Ke{constructor(){h(this,"loadedFonts",new Set),h(this,"fetcher",fetch)}setFetcher(t){this.fetcher=t}async loadFonts(t,e){const n=new Function("m","return import(m)"),r=this.fetcher||(this.fetcher=await async function(){const{fetchBuilder:t,FileSystemCache:e}=await n("node-fetch-cache"),r=new e({cacheDirectory:".cache/typst/fonts"}),i=t.withCache(r);return function(t,e){const n=setTimeout((()=>{console.warn("font fetching is stucking:",t)}),15e3);return i(t,e).finally((()=>{clearTimeout(n)}))}}()),i=e.filter((t=>t instanceof Uint8Array||!this.loadedFonts.has(t)&&(this.loadedFonts.add(t),!0))),o=await Promise.all(i.map((async e=>{if(!(e instanceof Uint8Array))return new Uint8Array(await(await r(e)).arrayBuffer());await t.add_raw_font(e)})));for(const e of o)e&&await t.add_raw_font(e)}async build(t,e,n){const r={ref:this,builder:e,hooks:n};for(const e of(null==t?void 0:t.beforeBuild)??[])await e(void 0,r);return n.latelyBuild&&n.latelyBuild(r),await e.build()}}async function ae(t,e,n,r){var i;return await e.init(null==(i=null==t?void 0:t.getModule)?void 0:i.call(t)),await(new Ke).build(t,new n,r)}class Pt{constructor(t){var e,n;h(this,"hookedElem"),h(this,"kModule"),h(this,"opts"),h(this,"modes",[]),h(this,"partialRendering",!0),h(this,"renderMode","svg"),h(this,"r"),h(this,"previewMode",0),h(this,"isContentPreview",!1),h(this,"isMixinOutline",!1),h(this,"backgroundColor","black"),h(this,"pageColor","white"),h(this,"pixelPerPt",3),h(this,"retrieveDOMState"),h(this,"isRendering",!1),h(this,"moduleInitialized",!1),h(this,"patchQueue",[]),h(this,"disposeList",[]),h(this,"canvasRenderCToken"),h(this,"currentRealScale",1),h(this,"currentScaleRatio",1),h(this,"vpTimeout"),h(this,"sampledRenderTime",0),h(this,"partialRenderPage",0),h(this,"outline"),h(this,"cursorPosition"),h(this,"cachedDOMState",{width:0,height:0,window:{innerWidth:0,innerHeight:0},boundingRect:{left:0,top:0,right:0}}),this.hookedElem=t.hookedElem,this.kModule=t.kModule,this.opts=t||{};{const{renderMode:e,previewMode:n,isContentPreview:r,retrieveDOMState:i}=t||{};this.partialRendering=!1,this.renderMode=e??this.renderMode,this.previewMode=n??this.previewMode,this.isContentPreview=r||!1,this.retrieveDOMState=i??(()=>({width:this.hookedElem.offsetWidth,height:this.hookedElem.offsetHeight,window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight},boundingRect:this.hookedElem.getBoundingClientRect()})),this.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--typst-preview-background-color")}this.hookedElem.classList.add("hide-scrollbar-x"),null==(e=this.hookedElem.parentElement)||e.classList.add("hide-scrollbar-x"),1===this.previewMode&&(this.hookedElem.classList.add("hide-scrollbar-y"),null==(n=this.hookedElem.parentElement)||n.classList.add("hide-scrollbar-y")),this.installCtrlWheelHandler()}reset(){this.kModule.reset(),this.moduleInitialized=!1}dispose(){const t=this.disposeList;this.disposeList=[],t.forEach((t=>t()))}static derive(t,e){return["rescale","rerender","postRender"].reduce(((n,r)=>(n[r]=t[`${r}$${e}`].bind(t),console.assert(void 0!==n[r],`${r}$${e} is undefined`),n)),{})}registerMode(t){const e=Pt.derive(this,t);this.modes.push([t,e]),t===this.renderMode&&(this.r=e)}installCtrlWheelHandler(){const t=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],e=e=>{var n,r,i,o;if(e.ctrlKey){e.preventDefault(),this.cachedDOMState=this.retrieveDOMState(),null!==window.onresize&&(window.onresize=null);const _=this.currentScaleRatio;if(e.deltaY<0){if(this.currentScaleRatio>=t.at(-1))return;this.currentScaleRatio=t.filter((t=>t>this.currentScaleRatio)).at(0)}else{if(!(e.deltaY>0))return;if(this.currentScaleRatio<=t.at(0))return;this.currentScaleRatio=t.filter((t=>t<this.currentScaleRatio)).at(-1)}const s=this.currentScaleRatio/_,a=e.pageX*(s-1),c=e.pageY*(s-1);Math.abs(this.currentScaleRatio-1)<1e-5?(this.hookedElem.classList.add("hide-scrollbar-x"),null==(n=this.hookedElem.parentElement)||n.classList.add("hide-scrollbar-x"),1===this.previewMode&&(this.hookedElem.classList.add("hide-scrollbar-y"),null==(r=this.hookedElem.parentElement)||r.classList.add("hide-scrollbar-y"))):(this.hookedElem.classList.remove("hide-scrollbar-x"),null==(i=this.hookedElem.parentElement)||i.classList.remove("hide-scrollbar-x"),1===this.previewMode&&(this.hookedElem.classList.remove("hide-scrollbar-y"),null==(o=this.hookedElem.parentElement)||o.classList.remove("hide-scrollbar-y")));const u=this.hookedElem.firstElementChild;if(u){const t=this.getSvgScaleRatio(),e=Number.parseFloat(u.getAttribute("data-height")),n=Math.ceil(e*t);this.hookedElem.style.height=2*n+"px"}return window.scrollBy(a,c),this.addViewportChange(),!1}};"dom"!==this.renderMode&&(typeof acquireVsCodeApi<"u"?(window.addEventListener("wheel",e,{passive:!1}),this.disposeList.push((()=>{window.removeEventListener("wheel",e)}))):(document.body.addEventListener("wheel",e,{passive:!1}),this.disposeList.push((()=>{document.body.removeEventListener("wheel",e)}))))}getSvgScaleRatio(){const t=this.hookedElem.firstElementChild;if(!t)return 0;const e=this.cachedDOMState,n=Number.parseFloat(t.getAttribute("data-width")||t.getAttribute("width")||"1"),r=Number.parseFloat(t.getAttribute("data-height")||t.getAttribute("height")||"1");return this.currentRealScale=1===this.previewMode?Math.min(e.width/n,e.height/r):e.width/n,this.currentRealScale*this.currentScaleRatio}processQueue(t){const e=t[0];switch(e){case"new":case"diff-v1":return"new"===e&&this.reset(),this.kModule.manipulateData({action:"merge",data:t[1]}),this.moduleInitialized=!0,!0;case"viewport-change":return!!this.moduleInitialized||(console.log("viewport-change before initialization"),!1);default:return console.log("svgUpdateEvent",t),!1}}triggerUpdate(){if(this.isRendering)return;this.isRendering=!0;const t=async()=>{if(this.cachedDOMState=this.retrieveDOMState(),0===this.patchQueue.length)return this.isRendering=!1,void this.postprocessChanges();try{let e=performance.now();const n=this.canvasRenderCToken;n&&(await n.cancel(),await n.wait(),this.canvasRenderCToken=void 0,console.log("cancel canvas rendering"));let r=!1;for(;this.patchQueue.length>0;)r=this.processQueue(this.patchQueue.shift())||r;let i=performance.now();r&&(this.r.rescale(),await this.r.rerender(),this.r.rescale());let o=performance.now();const _=(t,e,n)=>`${t} ${(n-e).toFixed(2)} ms`;this.sampledRenderTime=o-e,console.log([_("parse",e,i),_("rerender",i,o),_("total",e,o)].join(", ")),requestAnimationFrame(t)}catch(t){console.error(t),this.isRendering=!1,this.postprocessChanges()}};requestAnimationFrame(t)}postprocessChanges(){this.r.postRender(),1===this.previewMode&&document.querySelectorAll(".typst-page-number-indicator").forEach((t=>{t.textContent=`${this.kModule.retrievePagesInfo().length}`}))}addChangement(t){"new"===t[0]&&this.patchQueue.splice(0,this.patchQueue.length);const e=()=>{this.vpTimeout=void 0,this.patchQueue.push(t),this.triggerUpdate()};void 0!==this.vpTimeout&&clearTimeout(this.vpTimeout),"viewport-change"===t[0]&&this.isRendering?this.vpTimeout=setTimeout(e,this.sampledRenderTime||100):e()}addViewportChange(){this.addChangement(["viewport-change",""])}}function Ge(t){return class{constructor(e){if(h(this,"impl"),h(this,"kModule"),e.isContentPreview&&(e.renderMode="canvas"),this.kModule=e.kModule,this.impl=new t(e),!this.impl.r)throw new Error(`mode is not supported, ${null==e?void 0:e.renderMode}`);e.isContentPreview&&(this.impl.partialRendering=!0,this.impl.pixelPerPt=1,this.impl.isMixinOutline=!0)}dispose(){this.impl.dispose()}reset(){this.impl.reset()}addChangement(t){this.impl.addChangement(t)}addViewportChange(){this.impl.addViewportChange()}setPageColor(t){this.impl.pageColor=t,this.addViewportChange()}setPartialRendering(t){this.impl.partialRendering=t}setCursor(t,e,n){this.impl.cursorPosition=[t,e,n]}setPartialPageNumber(t){return!(t<=0||t>this.kModule.retrievePagesInfo().length)&&(this.impl.partialRenderPage=t-1,this.addViewportChange(),!0)}getPartialPageNumber(){return this.impl.partialRenderPage+1}setOutineData(t){this.impl.outline=t,this.addViewportChange()}}}function Xe(t,...e){return e.reduce(((t,e)=>e(t)),t)}class Qe{constructor(){let t,e;h(this,"isCancellationRequested",!1),h(this,"_onCancelled"),h(this,"_onCancelledResolveResolved"),this._onCancelled=new Promise((n=>{t=n,e&&e(n)})),this._onCancelledResolveResolved=new Promise((n=>{e=n,t&&n(t)}))}async cancel(){await this._onCancelledResolveResolved,this.isCancellationRequested=!0}isCancelRequested(){return this.isCancellationRequested}async consume(){(await this._onCancelledResolveResolved)()}wait(){return this._onCancelled}}const Ye=()=>new Promise((t=>requestAnimationFrame(t)));function Ze(t){return class extends t{constructor(...t){if(super(...t),h(this,"tmpl",document.createElement("template")),h(this,"stub",this.createElement("<stub></stub>")),h(this,"plugin"),h(this,"docKernel"),h(this,"resourceHeader"),h(this,"pages",[]),h(this,"domScale",1),h(this,"track_mode",0),h(this,"current_task"),h(this,"viewport"),this.registerMode("dom"),this.disposeList.push((()=>{this.dispose()})),this.plugin=this.opts.renderer,void 0!==this.opts.domScale){if(this.opts.domScale<=0)throw new Error("domScale must be positive");this.domScale=this.opts.domScale}}dispose(){for(const t of this.pages)t.dispose();this.docKernel&&this.docKernel.free()}createElement(t){return this.tmpl.innerHTML=t,this.tmpl.content.firstElementChild}async mountDom(t){if(console.log("mountDom",t),this.docKernel)throw new Error("already mounted");this.hookedElem.innerHTML='<svg class="typst-svg-resources" viewBox="0 0 0 0" width="0" height="0" style="opacity: 0; position: absolute;"></svg>',this.resourceHeader=this.hookedElem.querySelector(".typst-svg-resources"),this.docKernel=await this.plugin.renderer.mount_dom(this.kModule[E],this.hookedElem),this.docKernel.bind_functions({populateGlyphs:t=>{let e=this.createElement(t);console.log("populateGlyphs",e);let n=e.firstElementChild;this.resourceHeader.append(n)}})}async cancelAnyway$dom(){if(console.log("cancelAnyway$dom"),this.current_task){const t=this.current_task;this.current_task=void 0,await t.cancel()}}retrieveDOMPages(){return Array.from(this.hookedElem.querySelectorAll(".typst-dom-page"))}postRender$dom(){}rescale$dom(){}getDomViewport(t,e){const n=e.left,r=-e.top,i=e.right,o=t.innerHeight-e.top,_={x:0,y:r/this.domScale,width:Math.max(i-n,0)/this.domScale,height:Math.max(o-r,0)/this.domScale};return(_.width<=0||_.height<=0)&&(_.x=_.y=_.width=_.height=0),_}async rerender$dom(){const t=this.retrieveDOMState(),{x:e,y:n,width:r,height:i}=this.getDomViewport(t.window,t.boundingRect);if(!await this.docKernel.relayout(e,n,r,i))return;const o=new Qe;this.doRender$dom(o),this.current_task=o}async doRender$dom(t){const e=this.retrieveDOMPages().map((t=>{const{innerWidth:e,innerHeight:n}=window,r=t.getBoundingClientRect();return{inWindow:!(r.left>e||r.right<0||r.top>n||r.bottom<0),page:t}})),n=async n=>{if(await Ye(),t.isCancelRequested())return void console.log("cancel stage",0,n);const r=e[n].page,i=r.getBoundingClientRect(),o=this.getDomViewport(window,i),_=t=>this.docKernel.need_repaint(n,o.x,o.y,o.width,o.height,t),s=t=>this.docKernel.repaint(n,o.x,o.y,o.width,o.height,t),a=e=>{if(!t.isCancelRequested())return((e,n)=>{if(e&&!t.isCancelRequested()&&n)return n()})(_(e),(()=>s(e)))};await a(0);const c=(i.width?Number.parseFloat(r.getAttribute("data-width"))/i.width:1)*this.domScale,u=(i.height?Number.parseFloat(r.getAttribute("data-height"))/i.height:1)*this.domScale;o.x*=c,o.y*=u,o.y-=100,o.width*=c,o.height*=u,o.height+=200,await a(1),await a(2),t.isCancelRequested()?console.log("cancel stage",2,n):_(3)?(async()=>{if(await s(3),!t.isCancelRequested())a(4)})():await a(4)},r=async r=>{for(let i=0;i<e.length;++i){if(t.isCancelRequested())return void console.log("cancel page",0,i);e[i].inWindow===r&&await n(i)}};this.cancelAnyway$dom(),await r(!0),await r(!1),!t.isCancelRequested()&&console.log("finished",0)}}}class tn extends(Ge(Xe(Pt,Ze))){}var ee;let yt=(ee=E,class{constructor(t,e){h(this,ee),this.plugin=t,this[E]=e}set backgroundColor(t){void 0!==t&&(this[E].background_color=t)}get backgroundColor(){return this[E].background_color}set pixelPerPt(t){void 0!==t&&(this[E].pixel_per_pt=t)}get pixelPerPt(){return this[E].pixel_per_pt}reset(){this.plugin.resetSession(this)}get doc_width(){return this[E].doc_width}get docWidth(){return this[E].doc_width}get doc_height(){return this[E].doc_height}get docHeight(){return this[E].doc_height}retrievePagesInfo(){const t=this[E].pages_info,e=[],n=t.page_count;for(let r=0;r<n;r++){const n=t.page(r);e.push({pageOffset:n.page_off,width:n.width_pt,height:n.height_pt})}return e}getSourceLoc(t){return this[E].source_span(t)}renderSvg(t){return this.plugin.renderSvg({renderSession:this,...t})}renderToSvg(t){return this.plugin.renderToSvg({renderSession:this,...t})}renderCanvas(t){return this.plugin.renderCanvas({renderSession:this,...t})}manipulateData(t){this.plugin.manipulateData({renderSession:this,...t})}renderSvgDiff(t){return this.plugin.renderSvgDiff({renderSession:this,...t})}get_source_loc(t){return this[E].source_span(t)}render_in_window(t,e,n,r){return this[E].render_in_window(t,e,n,r)}merge_delta(t){this.plugin.manipulateData({renderSession:this,action:"merge",data:t})}});var ne;let en=(ne=E,class{constructor(t,e){h(this,ne),h(this,"managedCanvasElemList",new Map),h(this,"canvasCounter",Math.random()),this.plugin=t,this[E]=e}manipulateData(t,e){return this[E].manipulate_data(t,e)}renderCanvas(t){const e=this.managedCanvasElemList;for(const[t,n]of e)n[0]=0;for(const n of t){const t=n.canvas;let r=t.dataset.manageId,i=2;r||(r=this.canvasCounter.toFixed(5),this.canvasCounter+=1,t.dataset.manageId=r,i=1);let o=e.get(r);if(o&&0!==o[0])throw new Error("cannot update a canvas for two times in batch");e.set(r,[i,{...n}])}const n=Array.from(e.entries()),r=new Uint8Array(n.length),i=new Array(n.length),o=n.map((([t,[n,o]],_)=>(n||e.delete(t),r[_]=n,i[_]=o.canvas,this.plugin.canvasOptionsToRust(o))));return this[E].render_canvas(r,i,o)}async retrievePagesInfo(){const t=await this[E].get_pages_info();console.log(t);const e=[],n=t.page_count;for(let r=0;r<n;r++){const n=t.page(r);e.push({pageOffset:n.page_off,width:n.width_pt,height:n.height_pt})}return e}});const nn=t=>new oe((async e=>await t.default(e)));function Dt(){return new ce}function Kn(){return new ce}async function Gn(){return(await Promise.resolve().then((()=>pe))).renderer_build_info()}let $t=!0;class ce{constructor(){h(this,"renderer"),h(this,"rendererJs")}async init(t){var e;this.rendererJs=await((null==(e=null==t?void 0:t.getWrapper)?void 0:e.call(t))||Promise.resolve().then((()=>pe)));const n=this.rendererJs.TypstRendererBuilder;this.renderer=await ae(t,nn(this.rendererJs),n,{})}loadGlyphPack(t){return Promise.resolve()}createOptionsToRust(t){const e=new this.rendererJs.CreateSessionOptions;return void 0!==t.format&&(e.format=t.format),void 0!==t.artifactContent&&(e.artifact_content=t.artifactContent),e}canvasOptionsToRust(t){const e=new this.rendererJs.RenderPageImageOptions;if(void 0===t.pageOffset)throw new Error("pageOffset is required in reflexo v0.5.0");if(e.page_off=t.pageOffset,void 0!==t.cacheKey&&(e.cache_key=t.cacheKey),void 0!==t.backgroundColor&&(e.background_color=t.backgroundColor),void 0!==t.pixelPerPt&&(e.pixel_per_pt=t.pixelPerPt),void 0!==t.dataSelection){let n=0;t.dataSelection.body?n|=1:t.canvas&&$t&&($t=!1,console.warn("dataSelection.body is not set but providing canvas for body")),(t.dataSelection.text||t.dataSelection.annotation)&&console.error("dataSelection.text and dataSelection.annotation are deprecated"),t.dataSelection.semantics&&(n|=8),e.data_selection=n}return e}retrievePagesInfoFromSession(t){return t.retrievePagesInfo()}renderCanvas(t){return this.withinOptionSession(t,(async e=>this.renderer.render_page_to_canvas(e[E],t.canvas||void 0,this.canvasOptionsToRust(t))))}async inAnimationFrame(t){return new Promise(((e,n)=>{requestAnimationFrame((()=>{try{e(t())}catch(t){n(t)}}))}))}async renderDisplayLayer(t,e,n){const r=t[E].pages_info.page_count,i=async(r,i)=>{const o=e[r].getContext("2d");if(!o)throw new Error("canvas context is null");return await this.renderCanvas({...n,canvas:o,renderSession:t,pageOffset:i})},o=performance.now(),_=await(async()=>{const t=[];for(let e=0;e<r;e++)t.push(await this.inAnimationFrame((()=>i(e,e))));return t})(),s=performance.now();return console.log(`display layer used: render = ${(s-o).toFixed(1)}ms`),_}renderTextLayer(t,e){const n=performance.now();t.forEach(((t,n)=>{t.innerHTML=e[n].htmlSemantics[0]}));const r=performance.now();console.log(`text layer used: render = ${(r-n).toFixed(1)}ms`)}async render(t){if("format"in t&&"vector"!==t.format&&["serde_json","js","ir"].includes(t.format))throw new Error(`deprecated format ${t.format}, please use vector format`);return this.renderToCanvas(t)}async renderDom(t){if("format"in t&&"vector"!==t.format&&["serde_json","js","ir"].includes(t.format))throw new Error(`deprecated format ${t.format}, please use vector format`);return this.withinOptionSession(t,(async e=>{const n=new tn({...t,renderMode:"dom",hookedElem:t.container,kModule:e,renderer:this});return await n.impl.mountDom(t.pixelPerPt),n}))}async renderToCanvas(t){let e,n;const r=t.container;r.style.visibility="hidden";const i=async(i,o)=>{try{n=await this.renderDisplayLayer(e,i,t),o()}finally{r.style.visibility="visible"}};return this.withinOptionSession(t,(async o=>{if(e=o,0===e[E].pages_info.page_count)throw new Error("No page found in session");if(void 0!==t.pixelPerPt&&t.pixelPerPt<=0)throw new Error("Invalid typst.RenderOptions.pixelPerPt, should be a positive number "+t.pixelPerPt);let _=t.backgroundColor;if(void 0!==_&&!/^#[0-9a-f]{6}$/.test(_))throw new Error("Invalid typst.backgroundColor color for matching ^#?[0-9a-f]{6}$ "+_);e.pixelPerPt=t.pixelPerPt??At.PIXEL_PER_PT,e.backgroundColor=_??"#ffffff";const s=performance.now(),a=new ie(this.retrievePagesInfoFromSession(e),r,t),c=performance.now();console.log(`layer used: retieve = ${(c-s).toFixed(1)}ms`),await i(a.canvasList,(()=>a.resetLayout())),this.renderTextLayer(a.textLayerList,n)}))}createModule(t){return Promise.resolve(new yt(this,this.renderer.create_session(t&&this.createOptionsToRust({format:"vector",artifactContent:t}))))}async createWorkerV0(t){return new en(this,await this.renderer.create_worker(t))}workerBridge(){return this.renderer.create_worker_bridge()}renderSvg(t,e){if(t instanceof yt||e)throw new Error("removed api, please use renderToSvg({ renderSession, container }) instead");return this.withinOptionSession(t,(async e=>{let n;return t.data_selection&&(n=0,t.data_selection.body&&(n|=1),t.data_selection.defs&&(n|=2),t.data_selection.css&&(n|=4),t.data_selection.js&&(n|=8)),Promise.resolve(this.renderer.svg_data(e[E],n))}))}renderSvgDiff(t){return t.window?this.renderer.render_svg_diff(t.renderSession[E],t.window.lo.x,t.window.lo.y,t.window.hi.x,t.window.hi.y):this.renderer.render_svg_diff(t.renderSession[E],0,0,1e33,1e33)}renderToSvg(t){return this.withinOptionSession(t,(async e=>Promise.resolve(this.renderer.render_svg(e[E],t.container))))}getCustomV1(t){return Promise.resolve(this.renderer.get_customs(t.renderSession[E]))}resetSession(t){return this.renderer.reset(t[E])}manipulateData(t){return this.renderer.manipulate_data(t.renderSession[E],t.action??"reset",t.data)}withinOptionSession(t,e){if("renderSession"in t)return e(t.renderSession);if("artifactContent"in t)return this.runWithSession(t,e);throw new Error("Invalid render options, should be one of RenderByContentOptions|RenderBySessionOptions")}async runWithSession(t,e){let n=t,r=e;e||(n=void 0,r=t);const i=this.renderer.create_session(n&&this.createOptionsToRust(n));try{const t=await r(new yt(this,i));return i.free(),t}catch(t){throw i.free(),t}}}var re;re=E;class rn{constructor(t){h(this,re),this[E]=t}reset(){this[E].reset()}current(){return this[E].current()}setAttachDebugInfo(t){this[E].set_attach_debug_info(t)}}const on=new oe((async t=>await(await Promise.resolve().then((()=>Ee))).default(t)));function sn(){return new _n}class _n{constructor(){h(this,"compiler"),h(this,"compilerJs")}async init(t){var e,n,r,i;this.compilerJs=await Promise.resolve().then((()=>Ee));const o=this.compilerJs.TypstCompilerBuilder,_={...t||{}},s=null==(e=_.beforeBuild)?void 0:e.some((t=>void 0!==t._preloadRemoteFontOptions)),a=null==(n=_.beforeBuild)?void 0:n.some((t=>{var e;return void 0!==(null==(e=t._preloadRemoteFontOptions)?void 0:e.assets)})),c=null==(r=_.beforeBuild)?void 0:r.some((t=>{var e;return!1===(null==(e=t._preloadRemoteFontOptions)?void 0:e.assets)}));(!s||!a&&!c)&&(null==(i=_.beforeBuild)||i.push(It([],{assets:["text"]}))),this.compiler=await ae(t,on,o,{})}compile(t){return new Promise((e=>{e("incrementalServer"in t?this.compiler.incr_compile(t.mainFilePath,vt(t.inputs),t.incrementalServer[E],jt(t.diagnostics)):this.compiler.compile(t.mainFilePath,vt(t.inputs),t.format||"vector",jt(t.diagnostics)))}))}query(t){return new Promise((e=>{e(JSON.parse(this.compiler.query(t.mainFilePath,vt(t.inputs),t.selector,t.field)))}))}getSemanticTokenLegend(){return new Promise((t=>{t(this.compiler.get_semantic_token_legend())}))}getSemanticTokens(t){return new Promise((e=>{this.compiler.reset(),e(this.compiler.get_semantic_tokens(t.offsetEncoding||"utf-16",t.mainFilePath,t.resultId))}))}async withIncrementalServer(t){const e=new rn(this.compiler.create_incr_server());try{return await t(e)}finally{e[E].free()}}async getAst(t){return this.compiler.get_ast(t)}async reset(){await new Promise((t=>{this.compiler.reset(),t(void 0)}))}addSource(t,e){if(arguments.length>2)throw new Error("use of addSource(path, source, isMain) is deprecated, please use addSource(path, source) instead");this.compiler.add_source(t,e)}mapShadow(t,e){this.compiler.map_shadow(t,e)}unmapShadow(t){this.compiler.unmap_shadow(t)}resetShadow(){this.compiler.reset_shadow()}renderPageToCanvas(){throw new Error("Please use the api TypstRenderer.renderToCanvas in v0.4.0")}}function vt(t){return t?Object.entries(t):void 0}function jt(t){switch(t){case"none":return 1;case"unix":return 2;case"full":return 3;default:return 0}}class an{constructor(t,e){h(this,"fullyCached"),h(this,"mTimes",new Map),h(this,"mRealPaths",new Map),h(this,"mData",new Map),this.root=t,t.endsWith("/")&&(this.root=this.root.slice(0,this.root.length-1)),null!=e&&e.polyfillHeadRequest,this.fullyCached=!(null==e||!e.fullyCached)}reset(){this.mTimes.clear(),this.mRealPaths.clear(),this.mData.clear()}resolvePath(t){return this.root+t}insertFile(t,e,n){this.mTimes.set(t,n),this.mData.set(t,e)}removeFile(t){this.mTimes.delete(t),this.mData.delete(t)}async getPreloadScript(){const t=[];t.push("((async () => {"),t.push("const snapshot = {  root: '', mTimes: new Map(),  mRealPaths: new Map(),  mData: [],};"),t.push("const runFetch = async (path) => {"),t.push("  const res = await fetch(snapshot.root + path);"),t.push("  const buffer = await res.arrayBuffer();"),t.push("  return [path, new Uint8Array(buffer)];"),t.push("};"),t.push(`snapshot.root = ${JSON.stringify(this.root)};`),t.push(`snapshot.mTimes = new Map([${[...this.mTimes.entries()].map((([t,e])=>`[${JSON.stringify(t)}, ${(null==e?void 0:e.getTime())||"undefined"}]`)).join(", ")}]);`),t.push(`snapshot.mRealPaths = new Map([${[...this.mRealPaths.entries()].map((([t,e])=>`[${JSON.stringify(t)}, ${JSON.stringify(e)}]`)).join(", ")}]);`);const e=await Promise.all([...this.mData.entries()].map((async([t,e])=>(t=JSON.stringify(t),e?`runFetch(${t})`:`Promise.resolve([${t}, undefined])`))));return t.push(`snapshot.mData = await Promise.all([${e.join(", ")}]);`),t.push("return snapshot;"),t.push("})())"),t.join("\n")}getLastModified(t){const e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(null),200===e.status?e.getResponseHeader("Last-Modified"):null}getMTimeInternal(t){const e=this.getLastModified(this.resolvePath(t));if(e)return new Date(e)}getMTime(t){if(t.startsWith("/@memory/"))return this.mTimes.has(t)?this.mTimes.get(t):void 0;if(!this.fullyCached)return this.getMTimeInternal(t);if(this.mTimes.has(t))return this.mTimes.get(t);const e=this.getMTimeInternal(t);return this.mTimes.set(t,e),e}isFile(){return!0}getRealPath(t){return t}readAllInternal(t){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",this.resolvePath(t),!1),e.send(null),200===e.status&&(e.response instanceof String||"string"==typeof e.response))return Uint8Array.from(e.response,(t=>t.charCodeAt(0)))}readAll(t){if(t.startsWith("/@memory/"))return this.mData.has(t)?this.mData.get(t):void 0;if(!this.fullyCached)return this.readAllInternal(t);if(this.mData.has(t))return this.mData.get(t);const e=this.readAllInternal(t);return this.mData.set(t,e),e}}class cn{constructor(){h(this,"mTimes",new Map),h(this,"mData",new Map)}reset(){this.mTimes.clear(),this.mData.clear()}insertFile(t,e,n){this.mTimes.set(t,n),this.mData.set(t,e)}removeFile(t){this.mTimes.delete(t),this.mData.delete(t)}getMTime(t){if(t.startsWith("/@memory/")&&this.mTimes.has(t))return this.mTimes.get(t)}isFile(){return!0}getRealPath(t){return t}readAll(t){if(t.startsWith("/@memory/")&&this.mData.has(t))return this.mData.get(t)}}class un{constructor(t){h(this,"cache",new Map),this.am=t}resolvePath(t){return`https://packages.typst.org/preview/${t.name}-${t.version}.tar.gz`}pullPackageData(t){const e=new XMLHttpRequest;if(e.overrideMimeType("text/plain; charset=x-user-defined"),e.open("GET",this.resolvePath(t),!1),e.send(null),200===e.status&&(e.response instanceof String||"string"==typeof e.response))return Uint8Array.from(e.response,(t=>t.charCodeAt(0)))}resolve(t,e){if("preview"!==t.namespace)return;const n=this.resolvePath(t);if(this.cache.has(n))return this.cache.get(n)();const r=this.pullPackageData(t);if(!r)return;const i=`/@memory/fetch/packages/preview/${t.namespace}/${t.name}/${t.version}`,o=[];e.untar(r,((t,e,n)=>{o.push([i+"/"+t,e,new Date(n)])}));const _=()=>{for(const[t,e,n]of o)this.am.insertFile(t,e,n);return i};return this.cache.set(n,_),_()}}let _;typeof window<"u"&&(window.TypstRenderModule={RenderView:ie,createTypstRenderer:Dt,createTypstSvgRenderer:Dt,preloadRemoteFonts:It,preloadSystemFonts:Tt},window.TypstCompileModule={createTypstCompiler:sn,preloadRemoteFonts:It,preloadSystemFonts:Tt,FetchAccessModel:an,MemoryAccessModel:cn,FetchPackageRegistry:un,withAccessModel:De,withPackageRegistry:Le});const H=new Array(128).fill(void 0);function a(t){return H[t]}H.push(void 0,null,!0,!1);let G=H.length;function gn(t){t<132||(H[t]=G,G=t)}function R(t){const e=a(t);return gn(t),e}function O(t){if("boolean"!=typeof t)throw new Error("expected a boolean argument, found "+typeof t)}function m(t){G===H.length&&H.push(H.length+1);const e=G;if(G=H[e],"number"!=typeof G)throw new Error("corrupt heap");return H[e]=t,e}const ue=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&ue.decode();let Q=null;function et(){return(null===Q||0===Q.byteLength)&&(Q=new Uint8Array(_.memory.buffer)),Q}function I(t,e){return t>>>=0,ue.decode(et().subarray(t,t+e))}let M=0;const _t=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},dn="function"==typeof _t.encodeInto?function(t,e){return _t.encodeInto(t,e)}:function(t,e){const n=_t.encode(t);return e.set(n),{read:t.length,written:n.length}};function L(t,e,n){if("string"!=typeof t)throw new Error("expected a string argument, found "+typeof t);if(void 0===n){const n=_t.encode(t),r=e(n.length,1)>>>0;return et().subarray(r,r+n.length).set(n),M=n.length,r}let r=t.length,i=e(r,1)>>>0;const o=et();let _=0;for(;_<r;_++){const e=t.charCodeAt(_);if(e>127)break;o[i+_]=e}if(_!==r){0!==_&&(t=t.slice(_)),i=n(i,r,r=_+3*t.length,1)>>>0;const e=et().subarray(i+_,i+r),o=dn(t,e);if(o.read!==t.length)throw new Error("failed to pass whole string");_+=o.written,i=n(i,r,_,1)>>>0}return M=_,i}function T(t){return null==t}let J=null;function b(){return(null===J||!0===J.buffer.detached||void 0===J.buffer.detached&&J.buffer!==_.memory.buffer)&&(J=new DataView(_.memory.buffer)),J}function Rt(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=Rt(t[0]));for(let r=1;r<e;r++)n+=", "+Rt(t[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(!(n.length>1))return toString.call(t);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:r}const ct=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>{_.__wbindgen_export_2.get(t.dtor)(t.a,t.b)}));function Wt(t,e,n,r){const i={a:t,b:e,cnt:1,dtor:n},o=(...t)=>{i.cnt++;try{return r(i.a,i.b,...t)}finally{0==--i.cnt&&(_.__wbindgen_export_2.get(i.dtor)(i.a,i.b),i.a=0,ct.unregister(i))}};return o.original=i,ct.register(o,i,i),o}function f(t,e){try{return t.apply(this,e)}catch(t){let e=function(){try{return t instanceof Error?`${t.message}\n\nStack:\n${t.stack}`:t.toString()}catch{return"<failed to stringify thrown value>"}}();throw console.error("wasm-bindgen: imported JS function that was not marked as `catch` threw an error:",e),t}}function l(t){if("number"!=typeof t)throw new Error("expected a number argument, found "+typeof t)}function fn(t,e){l(t),l(e),_.__wbindgen_export_3(t,e)}function wn(t,e,n){l(t),l(e),_.__wbindgen_export_4(t,e,m(n))}function ln(t,e,n,r){const i={a:t,b:e,cnt:1,dtor:n},o=(...t)=>{i.cnt++;const e=i.a;i.a=0;try{return r(e,i.b,...t)}finally{0==--i.cnt?(_.__wbindgen_export_2.get(i.dtor)(e,i.b),ct.unregister(i)):i.a=e}};return o.original=i,ct.register(o,i,i),o}function bn(t,e,n){l(t),l(e),_.__wbindgen_export_5(t,e,m(n))}function ut(t,e){const n=e(1*t.length,1)>>>0;return et().set(t,n/1),M=t.length,n}let Y=null;function pn(){return(null===Y||0===Y.byteLength)&&(Y=new Uint32Array(_.memory.buffer)),Y}function hn(t,e){const n=e(4*t.length,4)>>>0;return pn().set(t,n/4),M=t.length,n}function k(t,e){try{return t.apply(this,e)}catch(t){_.__wbindgen_export_7(m(t))}}function mn(t,e,n,r){l(t),l(e),_.__wbindgen_export_8(t,e,m(n),m(r))}function U(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);return t.ptr}function Bt(t,e){const n=e(4*t.length,4)>>>0,r=b();for(let e=0;e<t.length;e++)r.setUint32(n+4*e,m(t[e]),!0);return M=t.length,n}function yn(){return R(_.renderer_build_info())}const zt=["nonzero","evenodd"],Ut=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_createsessionoptions_free(t>>>0,1)));class ge{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Ut.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_createsessionoptions_free(t,0)}constructor(){const t=_.createsessionoptions_new();return this.__wbg_ptr=t>>>0,Ut.register(this,this.__wbg_ptr,this),this}set format(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),n=M;_.createsessionoptions_set_format(this.__wbg_ptr,e,n)}set artifact_content(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=ut(t,_.__wbindgen_export_0),n=M;_.createsessionoptions_set_artifact_content(this.__wbg_ptr,e,n)}}const qt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_incrdomdocclient_free(t>>>0,1)));class gt{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t>>>=0;const e=Object.create(gt.prototype);return e.__wbg_ptr=t,qt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,qt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_incrdomdocclient_free(t,0)}bind_functions(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),_.incrdomdocclient_bind_functions(this.__wbg_ptr,m(t))}relayout(t,e,n,r){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);return R(_.incrdomdocclient_relayout(this.__wbg_ptr,t,e,n,r))}need_repaint(t,e,n,r,i,o){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const c=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),l(t),l(o),_.incrdomdocclient_need_repaint(c,this.__wbg_ptr,t,e,n,r,i,o);var s=b().getInt32(c+0,!0),a=b().getInt32(c+4,!0);if(b().getInt32(c+8,!0))throw R(a);return 0!==s}finally{_.__wbindgen_add_to_stack_pointer(16)}}repaint(t,e,n,r,i,o){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const c=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),l(t),l(o),_.incrdomdocclient_repaint(c,this.__wbg_ptr,t,e,n,r,i,o);var s=b().getInt32(c+0,!0),a=b().getInt32(c+4,!0);if(b().getInt32(c+8,!0))throw R(a);return R(s)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Nt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_pageinfo_free(t>>>0,1)));class rt{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t>>>=0;const e=Object.create(rt.prototype);return e.__wbg_ptr=t,Nt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Nt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_pageinfo_free(t,0)}get page_off(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pageinfo_page_off(this.__wbg_ptr)>>>0}get width_pt(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pageinfo_width_pt(this.__wbg_ptr)}get height_pt(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pageinfo_height_pt(this.__wbg_ptr)}}const Ht=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_pagesinfo_free(t>>>0,1)));class dt{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t>>>=0;const e=Object.create(dt.prototype);return e.__wbg_ptr=t,Ht.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Ht.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_pagesinfo_free(t,0)}get page_count(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pagesinfo_page_count(this.__wbg_ptr)>>>0}page_by_number(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),l(t);const e=_.pagesinfo_page_by_number(this.__wbg_ptr,t);return 0===e?void 0:rt.__wrap(e)}page(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),l(t);const e=_.pagesinfo_page(this.__wbg_ptr,t);return rt.__wrap(e)}width(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pagesinfo_width(this.__wbg_ptr)}height(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.pagesinfo_height(this.__wbg_ptr)}}const Vt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_renderpageimageoptions_free(t>>>0,1)));class ot{static __unwrap(t){return t instanceof ot?t.__destroy_into_raw():0}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Vt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_renderpageimageoptions_free(t,0)}constructor(){const t=_.renderpageimageoptions_new();return this.__wbg_ptr=t>>>0,Vt.register(this,this.__wbg_ptr,this),this}get pixel_per_pt(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_pixel_per_pt(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getFloat32(n+4,!0);return 0===t?void 0:e}finally{_.__wbindgen_add_to_stack_pointer(16)}}set pixel_per_pt(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),T(t)||l(t),_.renderpageimageoptions_set_pixel_per_pt(this.__wbg_ptr,!T(t),T(t)?0:t)}get background_color(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_background_color(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);let r;return 0!==t&&(r=I(t,e).slice(),_.__wbindgen_export_6(t,1*e,1)),r}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);var e=T(t)?0:L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),n=M;_.renderpageimageoptions_set_background_color(this.__wbg_ptr,e,n)}get page_off(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.renderpageimageoptions_page_off(this.__wbg_ptr)>>>0}set page_off(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),l(t),_.renderpageimageoptions_set_page_off(this.__wbg_ptr,t)}get cache_key(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_cache_key(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);let r;return 0!==t&&(r=I(t,e).slice(),_.__wbindgen_export_6(t,1*e,1)),r}finally{_.__wbindgen_add_to_stack_pointer(16)}}set cache_key(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);var e=T(t)?0:L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),n=M;_.renderpageimageoptions_set_cache_key(this.__wbg_ptr,e,n)}get data_selection(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.renderpageimageoptions_data_selection(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);return 0===t?void 0:e>>>0}finally{_.__wbindgen_add_to_stack_pointer(16)}}set data_selection(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),T(t)||l(t),_.renderpageimageoptions_set_data_selection(this.__wbg_ptr,!T(t),T(t)?0:t)}}const Jt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_rendersession_free(t>>>0,1)));class j{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t>>>=0;const e=Object.create(j.prototype);return e.__wbg_ptr=t,Jt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Jt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_rendersession_free(t,0)}get pixel_per_pt(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersession_pixel_per_pt(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getFloat32(n+4,!0);return 0===t?void 0:e}finally{_.__wbindgen_add_to_stack_pointer(16)}}set pixel_per_pt(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),_.rendersession_set_pixel_per_pt(this.__wbg_ptr,t)}get background_color(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersession_background_color(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);let r;return 0!==t&&(r=I(t,e).slice(),_.__wbindgen_export_6(t,1*e,1)),r}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),n=M;_.rendersession_set_background_color(this.__wbg_ptr,e,n)}get pages_info(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const t=_.rendersession_pages_info(this.__wbg_ptr);return dt.__wrap(t)}get doc_width(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.rendersession_doc_width(this.__wbg_ptr)}get doc_height(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");return l(this.__wbg_ptr),_.rendersession_doc_height(this.__wbg_ptr)}source_span(t){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const o=hn(t,_.__wbindgen_export_0),s=M;_.rendersession_source_span(i,this.__wbg_ptr,o,s);var e=b().getInt32(i+0,!0),n=b().getInt32(i+4,!0),r=b().getInt32(i+8,!0);if(b().getInt32(i+12,!0))throw R(r);let a;return 0!==e&&(a=I(e,n).slice(),_.__wbindgen_export_6(e,1*n,1)),a}finally{_.__wbindgen_add_to_stack_pointer(16)}}render_in_window(t,e,n,r){let i,o;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const c=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersession_render_in_window(c,this.__wbg_ptr,t,e,n,r);var s=b().getInt32(c+0,!0),a=b().getInt32(c+4,!0);return i=s,o=a,I(s,a)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_6(i,o,1)}}}const Kt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_rendersessionoptions_free(t>>>0,1)));class vn{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Kt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_rendersessionoptions_free(t,0)}constructor(){const t=_.rendersessionoptions_new();return this.__wbg_ptr=t>>>0,Kt.register(this,this.__wbg_ptr,this),this}get pixel_per_pt(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersessionoptions_pixel_per_pt(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getFloat32(n+4,!0);return 0===t?void 0:e}finally{_.__wbindgen_add_to_stack_pointer(16)}}set pixel_per_pt(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr),_.rendersessionoptions_set_pixel_per_pt(this.__wbg_ptr,t)}get background_color(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersessionoptions_background_color(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);let r;return 0!==t&&(r=I(t,e).slice(),_.__wbindgen_export_6(t,1*e,1)),r}finally{_.__wbindgen_add_to_stack_pointer(16)}}set background_color(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),n=M;_.rendersessionoptions_set_background_color(this.__wbg_ptr,e,n)}get format(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.rendersessionoptions_format(n,this.__wbg_ptr);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);let r;return 0!==t&&(r=I(t,e).slice(),_.__wbindgen_export_6(t,1*e,1)),r}finally{_.__wbindgen_add_to_stack_pointer(16)}}set format(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);const e=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),n=M;_.rendersessionoptions_set_format(this.__wbg_ptr,e,n)}}const xt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_typstrenderer_free(t>>>0,1)));class ft{static __wrap(t){t>>>=0;const e=Object.create(ft.prototype);return e.__wbg_ptr=t,xt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,xt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstrenderer_free(t,0)}load_glyph_pack(t){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr),_.typstrenderer_load_glyph_pack(n,this.__wbg_ptr,m(t));var e=b().getInt32(n+0,!0);if(b().getInt32(n+4,!0))throw R(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}render_svg_diff(t,e,n,r,i){let o,s;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const u=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");_.typstrenderer_render_svg_diff(u,this.__wbg_ptr,t.__wbg_ptr,e,n,r,i);var a=b().getInt32(u+0,!0),c=b().getInt32(u+4,!0);return o=a,s=c,I(a,c)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_6(o,s,1)}}svg_data(t,e){let n,r;try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const g=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");T(e)||l(e),_.typstrenderer_svg_data(g,this.__wbg_ptr,t.__wbg_ptr,!T(e),T(e)?0:e);var i=b().getInt32(g+0,!0),o=b().getInt32(g+4,!0),s=b().getInt32(g+8,!0),a=b().getInt32(g+12,!0),c=i,u=o;if(a)throw c=0,u=0,R(s);return n=c,r=u,I(c,u)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_export_6(n,r,1)}}get_customs(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");return R(_.typstrenderer_get_customs(this.__wbg_ptr,t.__wbg_ptr))}render_svg(t,e){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");_.typstrenderer_render_svg(i,this.__wbg_ptr,t.__wbg_ptr,m(e));var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);if(b().getInt32(i+8,!0))throw R(r);return 0!==n}finally{_.__wbindgen_add_to_stack_pointer(16)}}create_worker(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);return R(_.typstrenderer_create_worker(this.__wbg_ptr,m(t)))}create_worker_bridge(){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=this.__destroy_into_raw(),r=_.__wbindgen_add_to_stack_pointer(-16);l(n),_.typstrenderer_create_worker_bridge(r,n);var t=b().getInt32(r+0,!0),e=b().getInt32(r+4,!0);if(b().getInt32(r+8,!0))throw R(e);return wt.__wrap(t)}finally{_.__wbindgen_add_to_stack_pointer(16)}}mount_dom(t,e){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");return R(_.typstrenderer_mount_dom(this.__wbg_ptr,t.__wbg_ptr,m(e)))}render_page_to_canvas(t,e,n){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");let r=0;if(!T(n)){if(U(n,ot),0===n.__wbg_ptr)throw new Error("Attempt to use a moved value");r=n.__destroy_into_raw()}return R(_.typstrenderer_render_page_to_canvas(this.__wbg_ptr,t.__wbg_ptr,m(e),r))}constructor(){const t=_.typstrenderer_new();return this.__wbg_ptr=t>>>0,xt.register(this,this.__wbg_ptr,this),this}create_session(t){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const r=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);let i=0;if(!T(t)){if(U(t,ge),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");i=t.__destroy_into_raw()}_.typstrenderer_create_session(r,this.__wbg_ptr,i);var e=b().getInt32(r+0,!0),n=b().getInt32(r+4,!0);if(b().getInt32(r+8,!0))throw R(n);return j.__wrap(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}reset(t){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const n=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");_.typstrenderer_reset(n,this.__wbg_ptr,t.__wbg_ptr);var e=b().getInt32(n+0,!0);if(b().getInt32(n+4,!0))throw R(e)}finally{_.__wbindgen_add_to_stack_pointer(16)}}manipulate_data(t,e,n){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);if(l(this.__wbg_ptr),U(t,j),0===t.__wbg_ptr)throw new Error("Attempt to use a moved value");const o=L(e,_.__wbindgen_export_0,_.__wbindgen_export_1),s=M,a=ut(n,_.__wbindgen_export_0),c=M;_.typstrenderer_manipulate_data(i,this.__wbg_ptr,t.__wbg_ptr,o,s,a,c);var r=b().getInt32(i+0,!0);if(b().getInt32(i+4,!0))throw R(r)}finally{_.__wbindgen_add_to_stack_pointer(16)}}session_from_artifact(t,e){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const o=ut(t,_.__wbindgen_export_0),s=M,a=L(e,_.__wbindgen_export_0,_.__wbindgen_export_1),c=M;_.typstrenderer_session_from_artifact(i,this.__wbg_ptr,o,s,a,c);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);if(b().getInt32(i+8,!0))throw R(r);return j.__wrap(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Gt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_typstrendererbuilder_free(t>>>0,1)));class xn{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Gt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstrendererbuilder_free(t,0)}constructor(){try{const n=_.__wbindgen_add_to_stack_pointer(-16);_.typstrendererbuilder_new(n);var t=b().getInt32(n+0,!0),e=b().getInt32(n+4,!0);if(b().getInt32(n+8,!0))throw R(e);return this.__wbg_ptr=t>>>0,Gt.register(this,this.__wbg_ptr,this),this}finally{_.__wbindgen_add_to_stack_pointer(16)}}build(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const t=this.__destroy_into_raw();l(t);return R(_.typstrendererbuilder_build(t))}add_glyph_pack(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);return R(_.typstrendererbuilder_add_glyph_pack(this.__wbg_ptr,m(t)))}add_raw_font(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);return R(_.typstrendererbuilder_add_raw_font(this.__wbg_ptr,m(t)))}add_web_fonts(t){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);return R(_.typstrendererbuilder_add_web_fonts(this.__wbg_ptr,m(t)))}}const kn=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_typstworker_free(t>>>0,1)));class In{constructor(){throw new Error("cannot invoke `new` directly")}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,kn.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_typstworker_free(t,0)}manipulate_data(t,e){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const i=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const o=L(t,_.__wbindgen_export_0,_.__wbindgen_export_1),s=M;_.typstworker_manipulate_data(i,this.__wbg_ptr,o,s,m(e));var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);if(b().getInt32(i+8,!0))throw R(r);return R(n)}finally{_.__wbindgen_add_to_stack_pointer(16)}}get_pages_info(){if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");l(this.__wbg_ptr);return R(_.typstworker_get_pages_info(this.__wbg_ptr))}render_canvas(t,e,n){try{if(0==this.__wbg_ptr)throw new Error("Attempt to use a moved value");const o=_.__wbindgen_add_to_stack_pointer(-16);l(this.__wbg_ptr);const s=ut(t,_.__wbindgen_export_0),a=M,c=Bt(e,_.__wbindgen_export_0),u=M,g=Bt(n,_.__wbindgen_export_0),d=M;_.typstworker_render_canvas(o,this.__wbg_ptr,s,a,c,u,g,d);var r=b().getInt32(o+0,!0),i=b().getInt32(o+4,!0);if(b().getInt32(o+8,!0))throw R(i);return R(r)}finally{_.__wbindgen_add_to_stack_pointer(16)}}}const Xt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>_.__wbg_workerbridge_free(t>>>0,1)));class wt{constructor(){throw new Error("cannot invoke `new` directly")}static __wrap(t){t>>>=0;const e=Object.create(wt.prototype);return e.__wbg_ptr=t,Xt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Xt.unregister(this),t}free(){const t=this.__destroy_into_raw();_.__wbg_workerbridge_free(t,0)}}async function En(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function de(){const t={wbg:{}};return t.wbg.__wbg_new_1073970097e5a420=function(){return f((function(t,e){try{var n={a:t,b:e};return m(new Promise(((t,e)=>{const r=n.a;n.a=0;try{return mn(r,n.b,t,e)}finally{n.a=r}})))}finally{n.a=n.b=0}}),arguments)},t.wbg.__wbg_new_abda76e883ba8a5f=function(){return f((function(){return m(new Error)}),arguments)},t.wbg.__wbg_stack_658279fe44541cf6=function(){return f((function(t,e){const n=L(a(e).stack,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;b().setInt32(t+4,r,!0),b().setInt32(t+0,n,!0)}),arguments)},t.wbg.__wbg_error_f851667af71bcfc6=function(){return f((function(t,e){let n,r;try{n=t,r=e,console.error(I(t,e))}finally{_.__wbindgen_export_6(n,r,1)}}),arguments)},t.wbg.__wbindgen_object_drop_ref=function(t){R(t)},t.wbg.__wbg_self_bf91bf94d9e04084=function(){return k((function(){return m(self.self)}),arguments)},t.wbg.__wbg_window_52dd9f07d03fd5f8=function(){return k((function(){return m(window.window)}),arguments)},t.wbg.__wbg_globalThis_05c129bf37fcf1be=function(){return k((function(){return m(globalThis.globalThis)}),arguments)},t.wbg.__wbg_global_3eca19bb09e9c484=function(){return k((function(){return m(global.global)}),arguments)},t.wbg.__wbindgen_is_undefined=function(t){const e=void 0===a(t);return O(e),e},t.wbg.__wbg_newnoargs_1ede4bf2ebbaaf43=function(){return f((function(t,e){return m(new Function(I(t,e)))}),arguments)},t.wbg.__wbg_call_a9ef466721e824f2=function(){return k((function(t,e){return m(a(t).call(a(e)))}),arguments)},t.wbg.__wbg_new_70a2f23d1565c04c=function(){return f((function(t,e){return m(new Error(I(t,e)))}),arguments)},t.wbg.__wbg_new_b1572e0bf16bb8b0=function(){return k((function(t,e){return m(new OffscreenCanvas(t>>>0,e>>>0))}),arguments)},t.wbg.__wbg_getContext_211e7f0e615215a4=function(){return k((function(t,e,n){const r=a(t).getContext(I(e,n));return T(r)?0:m(r)}),arguments)},t.wbg.__wbg_instanceof_OffscreenCanvasRenderingContext2d_07b9d9deabbab2c4=function(){return f((function(t){let e;try{e=a(t)instanceof OffscreenCanvasRenderingContext2D}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_save_51c5c825520e8fd0=function(){return f((function(t){a(t).save()}),arguments)},t.wbg.__wbg_setfont_34289a9ff190aed8=function(){return f((function(t,e,n){a(t).font=I(e,n)}),arguments)},t.wbg.__wbg_measureText_8547338485b05bb0=function(){return k((function(t,e,n){return m(a(t).measureText(I(e,n)))}),arguments)},t.wbg.__wbg_width_e4c18791794a7c38=function(){return f((function(t){return a(t).width}),arguments)},t.wbg.__wbg_restore_cd7f36f354e951db=function(){return f((function(t){a(t).restore()}),arguments)},t.wbg.__wbg_new_034f913e7636e987=function(){return f((function(){return m(new Array)}),arguments)},t.wbg.__wbg_push_36cf4d81d7da33d1=function(){return f((function(t,e){const n=a(t).push(a(e));return l(n),n}),arguments)},t.wbg.__wbg_new_e69b5f66fda8f13c=function(){return f((function(){return m(new Object)}),arguments)},t.wbg.__wbg_settype_623d2ee701e6310a=function(){return f((function(t,e,n){a(t).type=I(e,n)}),arguments)},t.wbg.__wbg_newwithu8arraysequenceandoptions_d41c0fdf78490206=function(){return k((function(t,e){return m(new Blob(a(t),a(e)))}),arguments)},t.wbg.__wbindgen_object_clone_ref=function(t){return m(a(t))},t.wbg.__wbindgen_string_new=function(t,e){return m(I(t,e))},t.wbg.__wbg_log_f740dc2253ea759b=function(){return f((function(t){console.log(a(t))}),arguments)},t.wbg.__wbg_newwithlength_76462a666eca145f=function(){return f((function(t){return m(new Uint8Array(t>>>0))}),arguments)},t.wbg.__wbg_length_9254c4bd3b9f23c4=function(){return f((function(t){const e=a(t).length;return l(e),e}),arguments)},t.wbg.__wbindgen_memory=function(){return m(_.memory)},t.wbg.__wbg_buffer_ccaed51a635d8a2d=function(){return f((function(t){return m(a(t).buffer)}),arguments)},t.wbg.__wbg_newwithbyteoffsetandlength_7e3eb787208af730=function(){return f((function(t,e,n){return m(new Uint8Array(a(t),e>>>0,n>>>0))}),arguments)},t.wbg.__wbg_set_ec2fcf81bc573fd9=function(){return f((function(t,e,n){a(t).set(a(e),n>>>0)}),arguments)},t.wbg.__wbg_instanceof_Window_6575cd7f1322f82f=function(){return f((function(t){let e;try{e=a(t)instanceof Window}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_instanceof_WorkerGlobalScope_90a78b9e967b8726=function(){return f((function(t){let e;try{e=a(t)instanceof WorkerGlobalScope}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_createImageBitmap_7893beeb597d1f1b=function(){return k((function(t,e){return m(a(t).createImageBitmap(a(e)))}),arguments)},t.wbg.__wbg_get_ef828680c64da212=function(){return k((function(t,e){return m(Reflect.get(a(t),a(e)))}),arguments)},t.wbg.__wbindgen_is_function=function(t){const e="function"==typeof a(t);return O(e),e},t.wbg.__wbg_call_5fb7c8066a4a4825=function(){return k((function(t,e,n,r){return m(a(t).call(a(e),a(n),a(r)))}),arguments)},t.wbg.__wbg_instanceof_Promise_f3fd1bcac3157f0c=function(){return f((function(t){let e;try{e=a(t)instanceof Promise}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_createImageBitmap_17badae68300b0a6=function(){return k((function(t,e){return m(a(t).createImageBitmap(a(e)))}),arguments)},t.wbg.__wbg_instanceof_ImageBitmap_b77911fe0757088f=function(){return f((function(t){let e;try{e=a(t)instanceof ImageBitmap}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_instanceof_OffscreenCanvas_ff1551edf0e1303c=function(){return f((function(t){let e;try{e=a(t)instanceof OffscreenCanvas}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbindgen_number_new=function(t){return m(t)},t.wbg.__wbg_newwithpathstring_ac464baa5b9a788c=function(){return k((function(t,e){return m(new Path2D(I(t,e)))}),arguments)},t.wbg.__wbg_revokeObjectURL_8e72bad4541bdca0=function(){return k((function(t,e){URL.revokeObjectURL(I(t,e))}),arguments)},t.wbg.__wbg_stringify_eead5648c09faaf8=function(){return k((function(t){return m(JSON.stringify(a(t)))}),arguments)},t.wbg.__wbindgen_string_get=function(t,e){const n=a(e),r="string"==typeof n?n:void 0;var i=T(r)?0:L(r,_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4,o,!0),b().setInt32(t+0,i,!0)},t.wbg.__wbg_setTransform_378786ee36ec3a18=function(){return k((function(t,e,n,r,i,o,_){a(t).setTransform(e,n,r,i,o,_)}),arguments)},t.wbg.__wbg_putImageData_44bf3a0787b975b7=function(){return k((function(t,e,n,r){a(t).putImageData(a(e),n,r)}),arguments)},t.wbg.__wbg_globalCompositeOperation_ce4b579a83346ce3=function(){return k((function(t,e){const n=L(a(e).globalCompositeOperation,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;b().setInt32(t+4,r,!0),b().setInt32(t+0,n,!0)}),arguments)},t.wbg.__wbg_setglobalCompositeOperation_904684eaf6e9e441=function(){return k((function(t,e,n){a(t).globalCompositeOperation=I(e,n)}),arguments)},t.wbg.__wbg_setfillStyle_f8273bc6290143be=function(){return f((function(t,e,n){a(t).fillStyle=I(e,n)}),arguments)},t.wbg.__wbg_fillRect_0a5c5e635be36fc5=function(){return f((function(t,e,n,r,i){a(t).fillRect(e,n,r,i)}),arguments)},t.wbg.__wbg_drawImage_cb573ac1888557f6=function(){return k((function(t,e,n,r){a(t).drawImage(a(e),n,r)}),arguments)},t.wbg.__wbg_clip_69ebc8c1a170c5e2=function(){return f((function(t,e){a(t).clip(a(e))}),arguments)},t.wbg.__wbg_setstrokeStyle_3c3c67fd62a77730=function(){return f((function(t,e,n){a(t).strokeStyle=I(e,n)}),arguments)},t.wbg.__wbg_stroke_a76887577bd68088=function(){return f((function(t,e){a(t).stroke(a(e))}),arguments)},t.wbg.__wbg_drawImage_79ac57dabab20303=function(){return k((function(t,e,n,r,i,o){a(t).drawImage(a(e),n,r,i,o)}),arguments)},t.wbg.__wbg_drawImage_02d5af4f48e0dc26=function(){return k((function(t,e,n,r,i,o){a(t).drawImage(a(e),n,r,i,o)}),arguments)},t.wbg.__wbg_setlineWidth_037dd016057a68de=function(){return f((function(t,e){a(t).lineWidth=e}),arguments)},t.wbg.__wbg_setlineCap_aa5b25b6af766ba6=function(){return f((function(t,e,n){a(t).lineCap=I(e,n)}),arguments)},t.wbg.__wbg_setlineJoin_316d4ae6dc0464ea=function(){return f((function(t,e,n){a(t).lineJoin=I(e,n)}),arguments)},t.wbg.__wbg_setmiterLimit_06bd35f2d7370de1=function(){return f((function(t,e){a(t).miterLimit=e}),arguments)},t.wbg.__wbg_setlineDashOffset_66ebdfaed783c789=function(){return f((function(t,e){a(t).lineDashOffset=e}),arguments)},t.wbg.__wbg_setLineDash_8566a73c937296d9=function(){return k((function(t,e){a(t).setLineDash(a(e))}),arguments)},t.wbg.__wbg_fill_35e67b0a78856ae3=function(){return f((function(t,e){a(t).fill(a(e))}),arguments)},t.wbg.__wbg_fill_d28a44b2f91d1baf=function(){return f((function(t,e,n){a(t).fill(a(e),zt[n])}),arguments)},t.wbg.__wbg_new_b5bf9532bd5c97fd=function(){return k((function(){return m(new Image)}),arguments)},t.wbg.__wbg_createObjectURL_11804d71ac214694=function(){return k((function(t,e){const n=L(URL.createObjectURL(a(e)),_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;b().setInt32(t+4,r,!0),b().setInt32(t+0,n,!0)}),arguments)},t.wbg.__wbg_width_fa277b4243adaabb=function(){return f((function(t){const e=a(t).width;return l(e),e}),arguments)},t.wbg.__wbg_height_250d8ced017769f8=function(){return f((function(t){const e=a(t).height;return l(e),e}),arguments)},t.wbg.__wbg_drawImage_5c4488af6c903314=function(){return k((function(t,e,n,r){a(t).drawImage(a(e),n,r)}),arguments)},t.wbg.__wbg_transferToImageBitmap_a7216e0d45f09601=function(){return k((function(t){return m(a(t).transferToImageBitmap())}),arguments)},t.wbg.__wbg_call_3bfa248576352471=function(){return k((function(t,e,n){return m(a(t).call(a(e),a(n)))}),arguments)},t.wbg.__wbg_setsrc_feb07d9d5b693db7=function(){return f((function(t,e,n){a(t).src=I(e,n)}),arguments)},t.wbg.__wbg_setonload_c44788491be30c5c=function(){return f((function(t,e){a(t).onload=a(e)}),arguments)},t.wbg.__wbg_setonerror_7e172f547433d10e=function(){return f((function(t,e){a(t).onerror=a(e)}),arguments)},t.wbg.__wbg_setTransform_ab9bffd1dfaadef8=function(){return k((function(t,e,n,r,i,o,_){a(t).setTransform(e,n,r,i,o,_)}),arguments)},t.wbg.__wbg_putImageData_f9c66228770c0556=function(){return k((function(t,e,n,r){a(t).putImageData(a(e),n,r)}),arguments)},t.wbg.__wbg_globalCompositeOperation_7599ad6f23aa7915=function(){return k((function(t,e){const n=L(a(e).globalCompositeOperation,_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;b().setInt32(t+4,r,!0),b().setInt32(t+0,n,!0)}),arguments)},t.wbg.__wbg_setglobalCompositeOperation_1ec7de7c74b1fffb=function(){return k((function(t,e,n){a(t).globalCompositeOperation=I(e,n)}),arguments)},t.wbg.__wbg_setfillStyle_2cc2c748b938a95e=function(){return f((function(t,e,n){a(t).fillStyle=I(e,n)}),arguments)},t.wbg.__wbg_fillRect_6784ab0aab9eebd5=function(){return f((function(t,e,n,r,i){a(t).fillRect(e,n,r,i)}),arguments)},t.wbg.__wbg_drawImage_007806da723a1e8b=function(){return k((function(t,e,n,r){a(t).drawImage(a(e),n,r)}),arguments)},t.wbg.__wbg_clip_6e3594f765ee3015=function(){return f((function(t,e){a(t).clip(a(e))}),arguments)},t.wbg.__wbg_setstrokeStyle_3c29a4e85b6087f5=function(){return f((function(t,e,n){a(t).strokeStyle=I(e,n)}),arguments)},t.wbg.__wbg_stroke_18a7adc53a38d993=function(){return f((function(t,e){a(t).stroke(a(e))}),arguments)},t.wbg.__wbg_drawImage_92c2feb5c6a72619=function(){return k((function(t,e,n,r,i,o){a(t).drawImage(a(e),n,r,i,o)}),arguments)},t.wbg.__wbg_drawImage_198159bdfa8bb195=function(){return k((function(t,e,n,r,i,o){a(t).drawImage(a(e),n,r,i,o)}),arguments)},t.wbg.__wbg_setlineWidth_267c5e81c3c67348=function(){return f((function(t,e){a(t).lineWidth=e}),arguments)},t.wbg.__wbg_setlineCap_46e48efce673b5bc=function(){return f((function(t,e,n){a(t).lineCap=I(e,n)}),arguments)},t.wbg.__wbg_setlineJoin_a17a487f4008f18f=function(){return f((function(t,e,n){a(t).lineJoin=I(e,n)}),arguments)},t.wbg.__wbg_setmiterLimit_4b85dd19bf9935d5=function(){return f((function(t,e){a(t).miterLimit=e}),arguments)},t.wbg.__wbg_setlineDashOffset_4c94a9565370ff7f=function(){return f((function(t,e){a(t).lineDashOffset=e}),arguments)},t.wbg.__wbg_restore_53f9e3ba68ab6122=function(){return f((function(t){a(t).restore()}),arguments)},t.wbg.__wbg_save_7da51dd755170877=function(){return f((function(t){a(t).save()}),arguments)},t.wbg.__wbg_setLineDash_a27082dd66f071a9=function(){return k((function(t,e){a(t).setLineDash(a(e))}),arguments)},t.wbg.__wbg_fill_dfa41e6d1844b522=function(){return f((function(t,e){a(t).fill(a(e))}),arguments)},t.wbg.__wbg_fill_ab72269002ce7fc4=function(){return f((function(t,e,n){a(t).fill(a(e),zt[n])}),arguments)},t.wbg.__wbg_log_c5235279373186d4=function(){return f((function(t,e){console.log(a(t),a(e))}),arguments)},t.wbg.__wbg_replaceWith_abcd4c84c203850c=function(){return k((function(t,e){a(t).replaceWith(a(e))}),arguments)},t.wbg.__wbg_firstElementChild_26953b81a3e880c1=function(){return f((function(t){const e=a(t).firstElementChild;return T(e)?0:m(e)}),arguments)},t.wbg.__wbg_instanceof_SvgGraphicsElement_aa4a8dae50f94d8e=function(){return f((function(t){let e;try{e=a(t)instanceof SVGGraphicsElement}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_nextElementSibling_f4a27a6c59d89e33=function(){return f((function(t){const e=a(t).nextElementSibling;return T(e)?0:m(e)}),arguments)},t.wbg.__wbg_lastElementChild_ae2f2e9fde5a862e=function(){return f((function(t){const e=a(t).lastElementChild;return T(e)?0:m(e)}),arguments)},t.wbg.__wbg_remove_d7a18d9f46bc50fd=function(){return f((function(t){a(t).remove()}),arguments)},t.wbg.__wbg_getContext_bf8985355a4d22ca=function(){return k((function(t,e,n){const r=a(t).getContext(I(e,n));return T(r)?0:m(r)}),arguments)},t.wbg.__wbg_instanceof_CanvasRenderingContext2d_775df7bd32f07559=function(){return f((function(t){let e;try{e=a(t)instanceof CanvasRenderingContext2D}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_clearRect_b31e8293856d6504=function(){return f((function(t,e,n,r,i){a(t).clearRect(e,n,r,i)}),arguments)},t.wbg.__wbg_getAttribute_8ac49f4186f4cefd=function(){return f((function(t,e,n,r){const i=a(e).getAttribute(I(n,r));var o=T(i)?0:L(i,_.__wbindgen_export_0,_.__wbindgen_export_1),s=M;b().setInt32(t+4,s,!0),b().setInt32(t+0,o,!0)}),arguments)},t.wbg.__wbg_setAttribute_2a8f647a8d92c712=function(){return k((function(t,e,n,r,i){a(t).setAttribute(I(e,n),I(r,i))}),arguments)},t.wbg.__wbg_style_04eb1488bc2ceffc=function(){return f((function(t){return m(a(t).style)}),arguments)},t.wbg.__wbg_removeProperty_5acbca68235d0706=function(){return k((function(t,e,n,r){const i=L(a(e).removeProperty(I(n,r)),_.__wbindgen_export_0,_.__wbindgen_export_1),o=M;b().setInt32(t+4,o,!0),b().setInt32(t+0,i,!0)}),arguments)},t.wbg.__wbg_setProperty_b9a2384cbfb499fb=function(){return k((function(t,e,n,r,i){a(t).setProperty(I(e,n),I(r,i))}),arguments)},t.wbg.__wbg_setinnerHTML_559d45055154f1d8=function(){return f((function(t,e,n){a(t).innerHTML=I(e,n)}),arguments)},t.wbg.__wbg_content_57ec141416462f04=function(){return f((function(t){return m(a(t).content)}),arguments)},t.wbg.__wbg_firstElementChild_4d48ea0ca6da5169=function(){return f((function(t){const e=a(t).firstElementChild;return T(e)?0:m(e)}),arguments)},t.wbg.__wbg_instanceof_HtmlCanvasElement_022ad88c76df9031=function(){return f((function(t){let e;try{e=a(t)instanceof HTMLCanvasElement}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_instanceof_SvgsvgElement_c57616bdbf67654f=function(){return f((function(t){let e;try{e=a(t)instanceof SVGSVGElement}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_instanceof_HtmlDivElement_571e59de6195834c=function(){return f((function(t){let e;try{e=a(t)instanceof HTMLDivElement}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_call_8547f4f9ec48f360=function(){return k((function(t,e,n,r,i){return m(a(t).call(a(e),a(n),a(r),a(i)))}),arguments)},t.wbg.__wbg_appendChild_bc4a0deae90a5164=function(){return k((function(t,e){return m(a(t).appendChild(a(e)))}),arguments)},t.wbg.__wbg_instanceof_HtmlElement_aab18e065dc9207d=function(){return f((function(t){let e;try{e=a(t)instanceof HTMLElement}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_document_d7fa2c739c2b191a=function(){return f((function(t){const e=a(t).document;return T(e)?0:m(e)}),arguments)},t.wbg.__wbg_createElement_e4523490bd0ae51d=function(){return k((function(t,e,n){return m(a(t).createElement(I(e,n)))}),arguments)},t.wbg.__wbg_instanceof_HtmlTemplateElement_bdfc6fd7326a5794=function(){return f((function(t){let e;try{e=a(t)instanceof HTMLTemplateElement}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_cloneNode_bd4b7e47afe3ce9f=function(){return k((function(t){return m(a(t).cloneNode())}),arguments)},t.wbg.__wbg_instanceof_Element_1a81366cc90e70e2=function(){return f((function(t){let e;try{e=a(t)instanceof Element}catch{e=!1}const n=e;return O(n),n}),arguments)},t.wbg.__wbg_setwidth_23bf2deedd907275=function(){return f((function(t,e){a(t).width=e>>>0}),arguments)},t.wbg.__wbg_setheight_239dc283bbe50da4=function(){return f((function(t,e){a(t).height=e>>>0}),arguments)},t.wbg.__wbindgen_jsval_eq=function(t,e){const n=a(t)===a(e);return O(n),n},t.wbg.__wbg_set_425e70f7c64ac962=function(){return f((function(t,e,n){a(t)[e>>>0]=R(n)}),arguments)},t.wbg.__wbg_set_e864d25d9b399c9f=function(){return k((function(t,e,n){const r=Reflect.set(a(t),a(e),a(n));return O(r),r}),arguments)},t.wbg.__wbg_typstrenderer_new=function(){return f((function(t){return m(ft.__wrap(t))}),arguments)},t.wbg.__wbg_incrdomdocclient_new=function(){return f((function(t){return m(gt.__wrap(t))}),arguments)},t.wbg.__wbg_new_fec2611eb9180f95=function(){return f((function(t){return m(new Uint8Array(a(t)))}),arguments)},t.wbg.__wbg_clientWidth_600f98ddd2b6cb36=function(){return f((function(t){const e=a(t).clientWidth;return l(e),e}),arguments)},t.wbg.__wbg_renderpageimageoptions_unwrap=function(){return f((function(t){const e=ot.__unwrap(R(t));return l(e),e}),arguments)},t.wbg.__wbg_warn_41503a1c2194de89=function(){return f((function(t){console.warn(a(t))}),arguments)},t.wbg.__wbindgen_throw=function(t,e){throw new Error(I(t,e))},t.wbg.__wbindgen_debug_string=function(t,e){const n=L(Rt(a(e)),_.__wbindgen_export_0,_.__wbindgen_export_1),r=M;b().setInt32(t+4,r,!0),b().setInt32(t+0,n,!0)},t.wbg.__wbindgen_cb_drop=function(t){const e=R(t).original;if(1==e.cnt--)return e.a=0,!0;const n=!1;return O(n),n},t.wbg.__wbg_then_4866a7d9f55d8f3e=function(){return f((function(t,e,n){return m(a(t).then(a(e),a(n)))}),arguments)},t.wbg.__wbg_queueMicrotask_848aa4969108a57e=function(){return f((function(t){return m(a(t).queueMicrotask)}),arguments)},t.wbg.__wbg_resolve_0aad7c1484731c99=function(){return f((function(t){return m(Promise.resolve(a(t)))}),arguments)},t.wbg.__wbg_then_748f75edfb032440=function(){return f((function(t,e){return m(a(t).then(a(e)))}),arguments)},t.wbg.__wbg_queueMicrotask_c5419c06eab41e73=function(){return f((function(t){queueMicrotask(a(t))}),arguments)},t.wbg.__wbindgen_closure_wrapper1673=function(){return f((function(t,e,n){return m(Wt(t,e,181,fn))}),arguments)},t.wbg.__wbindgen_closure_wrapper1678=function(){return f((function(t,e,n){return m(Wt(t,e,181,wn))}),arguments)},t.wbg.__wbindgen_closure_wrapper2260=function(){return f((function(t,e,n){return m(ln(t,e,181,bn))}),arguments)},t}function fe(t,e){return _=t.exports,we.__wbindgen_wasm_module=e,J=null,Y=null,Q=null,_}function Sn(t){if(void 0!==_)return _;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?({module:t}=t):console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const e=de();t instanceof WebAssembly.Module||(t=new WebAssembly.Module(t));return fe(new WebAssembly.Instance(t,e),t)}async function we(t){if(void 0!==_)return _;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?({module_or_path:t}=t):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=le("typst_ts_renderer_bg.wasm",import.meta.url));const e=de();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await En(await t,e);return fe(n,r)}let le=async function(t,e){throw new Error("Cannot import wasm module without importer: "+t+" "+e)};function be(t){le=t}let Rn=async function(t,e){const n=new Function("m","return import(m)"),r=await n("path"),{readFileSync:i}=await n("fs"),o=new URL(r.join(r.dirname(e),t));return await i(o).buffer};const Cn=typeof process<"u"&&null!=process.versions&&null!=process.versions.node;Cn&&be(Rn);const pe=Object.freeze(Object.defineProperty({__proto__:null,CreateSessionOptions:ge,IncrDomDocClient:gt,PageInfo:rt,PagesInfo:dt,RenderPageImageOptions:ot,RenderSession:j,RenderSessionOptions:vn,TypstRenderer:ft,TypstRendererBuilder:xn,TypstWorker:In,WorkerBridge:wt,default:we,initSync:Sn,renderer_build_info:yn,setImportWasmModule:be},Symbol.toStringTag,{value:"Module"}));let u;const V=new Array(128).fill(void 0);function p(t){return V[t]}V.push(void 0,null,!0,!1);let nt=V.length;function An(t){t<132||(V[t]=nt,nt=t)}function S(t){const e=p(t);return An(t),e}function v(t){nt===V.length&&V.push(V.length+1);const e=nt;return nt=V[e],V[e]=t,e}const he=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&he.decode();let Z=null;function X(){return(null===Z||0===Z.byteLength)&&(Z=new Uint8Array(u.memory.buffer)),Z}function N(t,e){return t>>>=0,he.decode(X().subarray(t,t+e))}let A=0;const at=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Mn="function"==typeof at.encodeInto?function(t,e){return at.encodeInto(t,e)}:function(t,e){const n=at.encode(t);return e.set(n),{read:t.length,written:n.length}};function F(t,e,n){if(void 0===n){const n=at.encode(t),r=e(n.length,1)>>>0;return X().subarray(r,r+n.length).set(n),A=n.length,r}let r=t.length,i=e(r,1)>>>0;const o=X();let _=0;for(;_<r;_++){const e=t.charCodeAt(_);if(e>127)break;o[i+_]=e}if(_!==r){0!==_&&(t=t.slice(_)),i=n(i,r,r=_+3*t.length,1)>>>0;const e=X().subarray(i+_,i+r);_+=Mn(t,e).written,i=n(i,r,_,1)>>>0}return A=_,i}function B(t){return null==t}let K=null;function x(){return(null===K||!0===K.buffer.detached||void 0===K.buffer.detached&&K.buffer!==u.memory.buffer)&&(K=new DataView(u.memory.buffer)),K}function Ct(t){const e=typeof t;if("number"==e||"boolean"==e||null==t)return`${t}`;if("string"==e)return`"${t}"`;if("symbol"==e){const e=t.description;return null==e?"Symbol":`Symbol(${e})`}if("function"==e){const e=t.name;return"string"==typeof e&&e.length>0?`Function(${e})`:"Function"}if(Array.isArray(t)){const e=t.length;let n="[";e>0&&(n+=Ct(t[0]));for(let r=1;r<e;r++)n+=", "+Ct(t[r]);return n+="]",n}const n=/\[object ([^\]]+)\]/.exec(toString.call(t));let r;if(!(n.length>1))return toString.call(t);if(r=n[1],"Object"==r)try{return"Object("+JSON.stringify(t)+")"}catch{return"Object"}return t instanceof Error?`${t.name}: ${t.message}\n${t.stack}`:r}const Qt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>{u.__wbindgen_export_2.get(t.dtor)(t.a,t.b)}));function Pn(t,e,n,r){const i={a:t,b:e,cnt:1,dtor:n},o=(...t)=>{i.cnt++;const e=i.a;i.a=0;try{return r(e,i.b,...t)}finally{0==--i.cnt?(u.__wbindgen_export_2.get(i.dtor)(e,i.b),Qt.unregister(i)):i.a=e}};return o.original=i,Qt.register(o,i,i),o}function Tn(t,e,n){u.__wbindgen_export_3(t,e,v(n))}function q(t,e){try{return t.apply(this,e)}catch(t){u.__wbindgen_export_5(v(t))}}function On(t,e,n,r){u.__wbindgen_export_6(t,e,v(n),v(r))}function me(t,e){const n=e(1*t.length,1)>>>0;return X().set(t,n/1),A=t.length,n}function Fn(t){return S(u.get_font_info(v(t)))}function Ln(t,e){t>>>=0;const n=x(),r=[];for(let i=t;i<t+4*e;i+=4)r.push(S(n.getUint32(i,!0)));return r}function st(t,e){const n=e(4*t.length,4)>>>0,r=x();for(let e=0;e<t.length;e++)r.setUint32(n+4*e,v(t[e]),!0);return A=t.length,n}function Dn(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`);return t.ptr}function $n(t,e){return t>>>=0,X().subarray(t/1,t/1+e)}const Yt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>u.__wbg_incrserver_free(t>>>0,1)));class it{static __wrap(t){t>>>=0;const e=Object.create(it.prototype);return e.__wbg_ptr=t,Yt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Yt.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_incrserver_free(t,0)}set_attach_debug_info(t){u.incrserver_set_attach_debug_info(this.__wbg_ptr,t)}current(){try{const n=u.__wbindgen_add_to_stack_pointer(-16);u.incrserver_current(n,this.__wbg_ptr);var t=x().getInt32(n+0,!0),e=x().getInt32(n+4,!0);let r;return 0!==t&&(r=$n(t,e).slice(),u.__wbindgen_export_4(t,1*e,1)),r}finally{u.__wbindgen_add_to_stack_pointer(16)}}reset(){u.incrserver_reset(this.__wbg_ptr)}}const kt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>u.__wbg_proxycontext_free(t>>>0,1)));class lt{static __wrap(t){t>>>=0;const e=Object.create(lt.prototype);return e.__wbg_ptr=t,kt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,kt.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_proxycontext_free(t,0)}constructor(t){const e=u.proxycontext_new(v(t));return this.__wbg_ptr=e>>>0,kt.register(this,this.__wbg_ptr,this),this}get context(){return S(u.proxycontext_context(this.__wbg_ptr))}untar(t,e){try{const r=u.__wbindgen_add_to_stack_pointer(-16),i=me(t,u.__wbindgen_export_0),o=A;u.proxycontext_untar(r,this.__wbg_ptr,i,o,v(e));var n=x().getInt32(r+0,!0);if(x().getInt32(r+4,!0))throw S(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}}const Zt=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>u.__wbg_typstcompiler_free(t>>>0,1)));class bt{static __wrap(t){t>>>=0;const e=Object.create(bt.prototype);return e.__wbg_ptr=t,Zt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Zt.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_typstcompiler_free(t,0)}reset(){try{const e=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_reset(e,this.__wbg_ptr);var t=x().getInt32(e+0,!0);if(x().getInt32(e+4,!0))throw S(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_inputs(t){try{const n=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_set_inputs(n,this.__wbg_ptr,v(t));var e=x().getInt32(n+0,!0);if(x().getInt32(n+4,!0))throw S(e)}finally{u.__wbindgen_add_to_stack_pointer(16)}}add_source(t,e){const n=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),r=A,i=F(e,u.__wbindgen_export_0,u.__wbindgen_export_1),o=A;return 0!==u.typstcompiler_add_source(this.__wbg_ptr,n,r,i,o)}map_shadow(t,e){const n=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),r=A,i=me(e,u.__wbindgen_export_0),o=A;return 0!==u.typstcompiler_add_source(this.__wbg_ptr,n,r,i,o)}unmap_shadow(t){const e=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),n=A;return 0!==u.typstcompiler_unmap_shadow(this.__wbg_ptr,e,n)}reset_shadow(){u.typstcompiler_reset_shadow(this.__wbg_ptr)}get_loaded_fonts(){try{const r=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_get_loaded_fonts(r,this.__wbg_ptr);var t=x().getInt32(r+0,!0),e=x().getInt32(r+4,!0),n=Ln(t,e).slice();return u.__wbindgen_export_4(t,4*e,4),n}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_ast(t){let e,n;try{const c=u.__wbindgen_add_to_stack_pointer(-16),g=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),d=A;u.typstcompiler_get_ast(c,this.__wbg_ptr,g,d);var r=x().getInt32(c+0,!0),i=x().getInt32(c+4,!0),o=x().getInt32(c+8,!0),_=x().getInt32(c+12,!0),s=r,a=i;if(_)throw s=0,a=0,S(o);return e=s,n=a,N(s,a)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_4(e,n,1)}}get_semantic_token_legend(){try{const n=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_get_semantic_token_legend(n,this.__wbg_ptr);var t=x().getInt32(n+0,!0),e=x().getInt32(n+4,!0);if(x().getInt32(n+8,!0))throw S(e);return S(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_semantic_tokens(t,e,n){try{const c=u.__wbindgen_add_to_stack_pointer(-16),g=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),d=A;var r=B(e)?0:F(e,u.__wbindgen_export_0,u.__wbindgen_export_1),i=A,o=B(n)?0:F(n,u.__wbindgen_export_0,u.__wbindgen_export_1),_=A;u.typstcompiler_get_semantic_tokens(c,this.__wbg_ptr,g,d,r,i,o,_);var s=x().getInt32(c+0,!0),a=x().getInt32(c+4,!0);if(x().getInt32(c+8,!0))throw S(a);return S(s)}finally{u.__wbindgen_add_to_stack_pointer(16)}}get_artifact(t,e){try{const i=u.__wbindgen_add_to_stack_pointer(-16),o=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),_=A;u.typstcompiler_get_artifact(i,this.__wbg_ptr,o,_,e);var n=x().getInt32(i+0,!0),r=x().getInt32(i+4,!0);if(x().getInt32(i+8,!0))throw S(r);return S(n)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_compiler_options(t,e){try{const o=u.__wbindgen_add_to_stack_pointer(-16),_=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),s=A;var n=B(e)?0:st(e,u.__wbindgen_export_0),r=A;u.typstcompiler_set_compiler_options(o,this.__wbg_ptr,_,s,n,r);var i=x().getInt32(o+0,!0);if(x().getInt32(o+4,!0))throw S(i)}finally{u.__wbindgen_add_to_stack_pointer(16)}}query(t,e,n,r){let i,o;try{const b=u.__wbindgen_add_to_stack_pointer(-16),h=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),m=A;var _=B(e)?0:st(e,u.__wbindgen_export_0),s=A;const y=F(n,u.__wbindgen_export_0,u.__wbindgen_export_1),v=A;var a=B(r)?0:F(r,u.__wbindgen_export_0,u.__wbindgen_export_1),c=A;u.typstcompiler_query(b,this.__wbg_ptr,h,m,_,s,y,v,a,c);var g=x().getInt32(b+0,!0),d=x().getInt32(b+4,!0),l=x().getInt32(b+8,!0),w=x().getInt32(b+12,!0),f=g,p=d;if(w)throw f=0,p=0,S(l);return i=f,o=p,N(f,p)}finally{u.__wbindgen_add_to_stack_pointer(16),u.__wbindgen_export_4(i,o,1)}}compile(t,e,n,r){try{const a=u.__wbindgen_add_to_stack_pointer(-16),c=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),g=A;var i=B(e)?0:st(e,u.__wbindgen_export_0),o=A;const d=F(n,u.__wbindgen_export_0,u.__wbindgen_export_1),l=A;u.typstcompiler_compile(a,this.__wbg_ptr,c,g,i,o,d,l,r);var _=x().getInt32(a+0,!0),s=x().getInt32(a+4,!0);if(x().getInt32(a+8,!0))throw S(s);return S(_)}finally{u.__wbindgen_add_to_stack_pointer(16)}}create_incr_server(){try{const n=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompiler_create_incr_server(n,this.__wbg_ptr);var t=x().getInt32(n+0,!0),e=x().getInt32(n+4,!0);if(x().getInt32(n+8,!0))throw S(e);return it.__wrap(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}incr_compile(t,e,n,r){try{const a=u.__wbindgen_add_to_stack_pointer(-16),c=F(t,u.__wbindgen_export_0,u.__wbindgen_export_1),g=A;var i=B(e)?0:st(e,u.__wbindgen_export_0),o=A;Dn(n,it),u.typstcompiler_incr_compile(a,this.__wbg_ptr,c,g,i,o,n.__wbg_ptr,r);var _=x().getInt32(a+0,!0),s=x().getInt32(a+4,!0);if(x().getInt32(a+8,!0))throw S(s);return S(_)}finally{u.__wbindgen_add_to_stack_pointer(16)}}}const te=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((t=>u.__wbg_typstcompilerbuilder_free(t>>>0,1)));class jn{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,te.unregister(this),t}free(){const t=this.__destroy_into_raw();u.__wbg_typstcompilerbuilder_free(t,0)}constructor(){try{const n=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompilerbuilder_new(n);var t=x().getInt32(n+0,!0),e=x().getInt32(n+4,!0);if(x().getInt32(n+8,!0))throw S(e);return this.__wbg_ptr=t>>>0,te.register(this,this.__wbg_ptr,this),this}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_dummy_access_model(){try{const e=u.__wbindgen_add_to_stack_pointer(-16);u.typstcompilerbuilder_set_dummy_access_model(e,this.__wbg_ptr);var t=x().getInt32(e+0,!0);if(x().getInt32(e+4,!0))throw S(t)}finally{u.__wbindgen_add_to_stack_pointer(16)}}set_access_model(t,e,n,r,i){return S(u.typstcompilerbuilder_set_access_model(this.__wbg_ptr,v(t),v(e),v(n),v(r),v(i)))}set_package_registry(t,e){return S(u.typstcompilerbuilder_set_package_registry(this.__wbg_ptr,v(t),v(e)))}add_raw_font(t){return S(u.typstcompilerbuilder_add_raw_font(this.__wbg_ptr,v(t)))}add_web_fonts(t){return S(u.typstcompilerbuilder_add_web_fonts(this.__wbg_ptr,v(t)))}add_glyph_pack(t){return S(u.typstcompilerbuilder_add_glyph_pack(this.__wbg_ptr,v(t)))}build(){const t=this.__destroy_into_raw();return S(u.typstcompilerbuilder_build(t))}}async function Wn(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(e){if("application/wasm"==t.headers.get("Content-Type"))throw e;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function ye(){const t={wbg:{}};return t.wbg.__wbg_new_abda76e883ba8a5f=function(){return v(new Error)},t.wbg.__wbg_stack_658279fe44541cf6=function(t,e){const n=F(p(e).stack,u.__wbindgen_export_0,u.__wbindgen_export_1),r=A;x().setInt32(t+4,r,!0),x().setInt32(t+0,n,!0)},t.wbg.__wbg_error_f851667af71bcfc6=function(t,e){let n,r;try{n=t,r=e,console.error(N(t,e))}finally{u.__wbindgen_export_4(n,r,1)}},t.wbg.__wbindgen_object_drop_ref=function(t){S(t)},t.wbg.__wbg_iterator_695d699a44d6234c=function(){return v(Symbol.iterator)},t.wbg.__wbg_get_ef828680c64da212=function(){return q((function(t,e){return v(Reflect.get(p(t),p(e)))}),arguments)},t.wbg.__wbindgen_is_function=function(t){return"function"==typeof p(t)},t.wbg.__wbg_call_a9ef466721e824f2=function(){return q((function(t,e){return v(p(t).call(p(e)))}),arguments)},t.wbg.__wbindgen_is_object=function(t){const e=p(t);return"object"==typeof e&&null!==e},t.wbg.__wbg_next_13b477da1eaa3897=function(t){return v(p(t).next)},t.wbg.__wbg_length_9254c4bd3b9f23c4=function(t){return p(t).length},t.wbg.__wbindgen_memory=function(){return v(u.memory)},t.wbg.__wbg_buffer_ccaed51a635d8a2d=function(t){return v(p(t).buffer)},t.wbg.__wbg_new_fec2611eb9180f95=function(t){return v(new Uint8Array(p(t)))},t.wbg.__wbg_set_ec2fcf81bc573fd9=function(t,e,n){p(t).set(p(e),n>>>0)},t.wbg.__wbg_self_bf91bf94d9e04084=function(){return q((function(){return v(self.self)}),arguments)},t.wbg.__wbg_window_52dd9f07d03fd5f8=function(){return q((function(){return v(window.window)}),arguments)},t.wbg.__wbg_globalThis_05c129bf37fcf1be=function(){return q((function(){return v(globalThis.globalThis)}),arguments)},t.wbg.__wbg_global_3eca19bb09e9c484=function(){return q((function(){return v(global.global)}),arguments)},t.wbg.__wbindgen_is_undefined=function(t){return void 0===p(t)},t.wbg.__wbg_newnoargs_1ede4bf2ebbaaf43=function(t,e){return v(new Function(N(t,e)))},t.wbg.__wbg_new_70a2f23d1565c04c=function(t,e){return v(new Error(N(t,e)))},t.wbg.__wbindgen_error_new=function(t,e){return v(new Error(N(t,e)))},t.wbg.__wbindgen_object_clone_ref=function(t){return v(p(t))},t.wbg.__wbindgen_string_new=function(t,e){return v(N(t,e))},t.wbg.__wbg_newwithbyteoffsetandlength_7e3eb787208af730=function(t,e,n){return v(new Uint8Array(p(t),e>>>0,n>>>0))},t.wbg.__wbindgen_number_new=function(t){return v(t)},t.wbg.__wbg_call_8547f4f9ec48f360=function(){return q((function(t,e,n,r,i){return v(p(t).call(p(e),p(n),p(r),p(i)))}),arguments)},t.wbg.__wbindgen_string_get=function(t,e){const n=p(e),r="string"==typeof n?n:void 0;var i=B(r)?0:F(r,u.__wbindgen_export_0,u.__wbindgen_export_1),o=A;x().setInt32(t+4,o,!0),x().setInt32(t+0,i,!0)},t.wbg.__wbindgen_jsval_loose_eq=function(t,e){return p(t)==p(e)},t.wbg.__wbg_instanceof_Object_4bbac482eda9b711=function(t){let e;try{e=p(t)instanceof Object}catch{e=!1}return e},t.wbg.__wbg_entries_c02034de337d3ee2=function(t){return v(Object.entries(p(t)))},t.wbg.__wbg_length_f217bbbf7e8e4df4=function(t){return p(t).length},t.wbg.__wbg_get_5419cf6b954aa11d=function(t,e){return v(p(t)[e>>>0])},t.wbg.__wbg_getwithrefkey_edc2c8960f0f1191=function(t,e){return v(p(t)[p(e)])},t.wbg.__wbindgen_in=function(t,e){return p(t)in p(e)},t.wbg.__wbg_isArray_6f3b47f09adb61b5=function(t){return Array.isArray(p(t))},t.wbg.__wbg_next_b06e115d1b01e10b=function(){return q((function(t){return v(p(t).next())}),arguments)},t.wbg.__wbg_done_983b5ffcaec8c583=function(t){return p(t).done},t.wbg.__wbg_value_2ab8a198c834c26a=function(t){return v(p(t).value)},t.wbg.__wbg_log_a0e624261f3b0108=function(t,e,n){console.log(p(t),p(e),p(n))},t.wbg.__wbg_call_3bfa248576352471=function(){return q((function(t,e,n){return v(p(t).call(p(e),p(n)))}),arguments)},t.wbg.__wbg_instanceof_ArrayBuffer_74945570b4a62ec7=function(t){let e;try{e=p(t)instanceof ArrayBuffer}catch{e=!1}return e},t.wbg.__wbindgen_is_string=function(t){return"string"==typeof p(t)},t.wbg.__wbg_isSafeInteger_b9dff570f01a9100=function(t){return Number.isSafeInteger(p(t))},t.wbg.__wbindgen_as_number=function(t){return+p(t)},t.wbg.__wbindgen_boolean_get=function(t){const e=p(t);return"boolean"==typeof e?e?1:0:2},t.wbg.__wbindgen_is_bigint=function(t){return"bigint"==typeof p(t)},t.wbg.__wbindgen_number_get=function(t,e){const n=p(e),r="number"==typeof n?n:void 0;x().setFloat64(t+8,B(r)?0:r,!0),x().setInt32(t+0,!B(r),!0)},t.wbg.__wbg_instanceof_Map_f96986929e7e89ed=function(t){let e;try{e=p(t)instanceof Map}catch{e=!1}return e},t.wbg.__wbindgen_bigint_get_as_i64=function(t,e){const n=p(e),r="bigint"==typeof n?n:void 0;x().setBigInt64(t+8,B(r)?BigInt(0):r,!0),x().setInt32(t+0,!B(r),!0)},t.wbg.__wbindgen_bigint_from_i64=function(t){return v(t)},t.wbg.__wbindgen_jsval_eq=function(t,e){return p(t)===p(e)},t.wbg.__wbindgen_bigint_from_u64=function(t){return v(BigInt.asUintN(64,t))},t.wbg.__wbg_instanceof_Uint8Array_df0761410414ef36=function(t){let e;try{e=p(t)instanceof Uint8Array}catch{e=!1}return e},t.wbg.__wbg_new_e69b5f66fda8f13c=function(){return v(new Object)},t.wbg.__wbg_new_034f913e7636e987=function(){return v(new Array)},t.wbg.__wbg_set_f975102236d3c502=function(t,e,n){p(t)[S(e)]=S(n)},t.wbg.__wbg_set_425e70f7c64ac962=function(t,e,n){p(t)[e>>>0]=S(n)},t.wbg.__wbg_now_70af4fe37a792251=function(){return Date.now()},t.wbg.__wbg_newwithbyteoffsetandlength_5f67057565ba35bf=function(t,e,n){return v(new Uint32Array(p(t),e>>>0,n>>>0))},t.wbg.__wbg_new_f72bacad1bb22b64=function(t){return v(new Uint32Array(p(t)))},t.wbg.__wbg_set_e864d25d9b399c9f=function(){return q((function(t,e,n){return Reflect.set(p(t),p(e),p(n))}),arguments)},t.wbg.__wbg_push_36cf4d81d7da33d1=function(t,e){return p(t).push(p(e))},t.wbg.__wbg_proxycontext_new=function(t){return v(lt.__wrap(t))},t.wbg.__wbg_newwithargs_54f5f31ff1323eb2=function(t,e,n,r){return v(new Function(N(t,e),N(n,r)))},t.wbg.__wbg_new_1073970097e5a420=function(t,e){try{var n={a:t,b:e};return v(new Promise(((t,e)=>{const r=n.a;n.a=0;try{return On(r,n.b,t,e)}finally{n.a=r}})))}finally{n.a=n.b=0}},t.wbg.__wbg_typstcompiler_new=function(t){return v(bt.__wrap(t))},t.wbg.__wbg_error_428a497903e96efa=function(t,e,n){console.error(p(t),p(e),p(n))},t.wbg.__wbindgen_throw=function(t,e){throw new Error(N(t,e))},t.wbg.__wbindgen_debug_string=function(t,e){const n=F(Ct(p(e)),u.__wbindgen_export_0,u.__wbindgen_export_1),r=A;x().setInt32(t+4,r,!0),x().setInt32(t+0,n,!0)},t.wbg.__wbg_queueMicrotask_848aa4969108a57e=function(t){return v(p(t).queueMicrotask)},t.wbg.__wbg_resolve_0aad7c1484731c99=function(t){return v(Promise.resolve(p(t)))},t.wbg.__wbindgen_cb_drop=function(t){const e=S(t).original;return 1==e.cnt--&&(e.a=0,!0)},t.wbg.__wbg_then_748f75edfb032440=function(t,e){return v(p(t).then(p(e)))},t.wbg.__wbg_queueMicrotask_c5419c06eab41e73=function(t){queueMicrotask(p(t))},t.wbg.__wbindgen_closure_wrapper15242=function(t,e,n){return v(Pn(t,e,1478,Tn))},t}function ve(t,e){return u=t.exports,xe.__wbindgen_wasm_module=e,K=null,Z=null,u}function Bn(t){if(void 0!==u)return u;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?({module:t}=t):console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const e=ye();t instanceof WebAssembly.Module||(t=new WebAssembly.Module(t));return ve(new WebAssembly.Instance(t,e),t)}async function xe(t){if(void 0!==u)return u;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?({module_or_path:t}=t):console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=ke("typst_ts_web_compiler_bg.wasm",import.meta.url));const e=ye();("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await Wn(await t,e);return ve(n,r)}let ke=async function(t,e){throw new Error("Cannot import wasm module without importer: "+t+" "+e)};function Ie(t){ke=t}let zn=async function(t,e){const n=new Function("m","return import(m)"),r=await n("path"),{readFileSync:i}=await n("fs"),o=new URL(r.join(r.dirname(e),t));return await i(o).buffer};const Un=typeof process<"u"&&null!=process.versions&&null!=process.versions.node;Un&&Ie(zn);const Ee=Object.freeze(Object.defineProperty({__proto__:null,IncrServer:it,ProxyContext:lt,TypstCompiler:bt,TypstCompilerBuilder:jn,default:xe,get_font_info:Fn,initSync:Bn,setImportWasmModule:Ie},Symbol.toStringTag,{value:"Module"}));export{an as FetchAccessModel,un as FetchPackageRegistry,sn as createTypstCompiler,Dt as createTypstRenderer,Kn as createTypstSvgRenderer,It as preloadRemoteFonts,Tt as preloadSystemFonts,Gn as rendererBuildInfo};